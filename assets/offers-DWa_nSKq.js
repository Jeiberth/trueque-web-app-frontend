import{_ as O,d as g,o as c,c as i,a as e,t as m,b as $,r as p,I as C,l as S,D as x,q as k,h as N,F as q,k as R,i as b,j as B,A as F,u as D}from"./index-D3n-v-P9.js";import{f as I}from"./feather-B1NedCwk.js";const E={style:{cursor:"pointer"}},L={class:"rap"},w=["data-feather"],A={class:"card-body"},U={class:"user-info"},j={class:"offer"},T={__name:"cardForClick",props:{text:{type:String,required:!0},icon:{type:String,required:!0}},emits:["clicked"],setup(n,{emit:t}){g(async()=>{I.replace()});const o=t,f=()=>{o("clicked")};return(s,l)=>(c(),i("div",E,[e("div",{class:"card",onClick:f},[e("div",L,[e("i",{"data-feather":n.icon,class:"iconStyle",style:{color:"black"}},null,8,w)]),e("div",A,[e("div",U,[e("p",j,m(s.$t(n.text)),1)])])])]))}},V=O(T,[["__scopeId","data-v-cffa1424"]]),J={style:{cursor:"pointer"}},M={class:"rap"},P={key:0,"data-feather":"check-circle",class:"iconStyle",style:{color:"green"}},z={key:1,"data-feather":"x-circle",class:"iconStyle",style:{color:"red"}},G={key:2,"data-feather":"clock",class:"iconStyle",style:{color:"darkcyan"}},H={class:"card-body"},K={class:"user-info"},Q={class:"offer"},W={class:"stats"},X={class:"stats"},Y={__name:"offerCard",props:{offerId:{type:Number},offerStatus:{type:Number,default:5},offerSend:{type:Boolean,default:!1},created_at:{type:String,default:"30/10/2024"}},emits:["openOffer"],setup(n,{emit:t}){const{t:o}=$(),f=p(!1),s=p(!1),l=p(!1),d=p(""),r=n;g(async()=>{r.offerStatus===1||r.offerStatus===2?(d.value=o("Accepted"),f.value=!0):r.offerStatus==3||r.offerStatus==4?(d.value=o("Rejected"),s.value=!0):r.offerStatus==5&&(d.value=o("Pending"),l.value=!0),await C(),I.replace()});const h=t,y=()=>{h("openOffer",r.offerId)},v=a=>new Date(a).toLocaleString();return(a,_)=>(c(),i("div",J,[e("div",{class:"card",onClick:y},[e("div",M,[f.value?(c(),i("i",P)):S("",!0),s.value?(c(),i("i",z)):S("",!0),l.value?(c(),i("i",G)):S("",!0)]),e("div",H,[e("div",K,[e("p",Q,m(n.offerSend?a.$t("Offer Sent"):a.$t("Offer Received")),1),e("p",W,m(d.value),1),e("p",X,m(v(n.created_at)),1)])])])]))}},Z=O(Y,[["__scopeId","data-v-40145c28"]]),ee={class:"cont-offer"},te={__name:"offers",setup(n){$();const t=b(),o=B(),f=D(),s=o.query.userId,l=o.query.chatId;x(()=>{t.commit("setLoading",!0)});const d=k(()=>t.getters.getUserOffers(s)),r=k(()=>d.value.offers),h=k(()=>d.value.makeOffer);g(async()=>{try{t.commit("RESET_OFFERS_COUNT",l),t.commit("setLoading",!0),I.replace(),await t.dispatch("fetchUserOffers",s)}catch(a){console.error("Error loading offers:",a)}finally{t.commit("setLoading",!1)}});const y=(a,_)=>{f.push({name:"watchOffer",query:{offerId:a,offer:JSON.stringify(_),userId:s}})},v=()=>{f.push({name:"makeOffer",query:{userId:s,chatId:l,data:JSON.stringify(h.value)}})};return(a,_)=>(c(),i("div",null,[e("div",ee,[N(V,{text:"Make an Offer",icon:"plus-circle",onClicked:v}),(c(!0),i(q,null,R(r.value,(u,se)=>(c(),F(Z,{onOpenOffer:ae=>y(u.id,u.offer),offerStatus:u.status_id,offerSend:u.offerSend,created_at:u.created_at,offerId:u.id},null,8,["onOpenOffer","offerStatus","offerSend","created_at","offerId"]))),256))])]))}},ce=O(te,[["__scopeId","data-v-92f8c1f0"]]);export{ce as default};
