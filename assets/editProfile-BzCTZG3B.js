import{_ as x,b as j,r as a,C as z,D as G,q as H,d as J,c as h,a as t,t as u,w as K,e as f,v as $,F as O,k as Q,l as W,m as X,h as Y,i as Z,p as ee,o as _,u as se,S as te}from"./index-Bii0dYqf.js";import{s as ae}from"./successErrorCard-BNIGdZKa.js";import"./feather-CNB3p-xE.js";const le={class:"landing-page"},oe={class:"container"},ne={"data-feather":"image",class:"iconStyle"},ie={class:"title"},re={class:"input-group"},ue=["placeholder"],ce={class:"input-group"},de=["disabled","placeholder"],pe={key:0,class:"dropdown"},ve=["onClick"],me={class:"input-group"},ge=["placeholder"],he={class:"input-group"},fe={value:"",disabled:""},_e={value:"en"},ye={value:"es"},we={type:"submit",class:"submit-button"},Ue={__name:"editProfile",setup($e){const{t:y,locale:E}=j(),l=Z(),T=new te,C=se(),v=a("success"),m=a(""),r=a(!1);l.getters.getUserId;const c=a("");a("");const d=a("");a("");const p=a("");z(["Alice","Bob","Charlie","Diana"]);const L=a(null),w=a(),b=a(!1),D=a(!1),g=a([]),i=a(""),k=a(null),I=a(null),F=()=>{clearTimeout(S),S=setTimeout(q,500)},V=e=>{E.value=e.target.value},U=a(!1),q=async()=>{if(!(i.value.length<3)){U.value=!0;try{const e=await ee.get("https://photon.komoot.io/api/",{params:{q:i.value,limit:5}});g.value=e.data.features.map(s=>({display_name:s.properties.housenumber&&s.properties.street?`${s.properties.housenumber} ${s.properties.street}, ${s.properties.city}`:`${s.properties.name}, ${s.properties.city}`,lat:s.geometry.coordinates[1],lon:s.geometry.coordinates[0]}))}catch(e){console.error("Error fetching address suggestions",e)}U.value=!1}};let S=null;const B=e=>{i.value=e.display_name,k.value=e.lat,I.value=e.lon,g.value=[]};G(()=>{l.commit("setLoading",!0)});const n=H(()=>l.getters.getUserDetails);J(async()=>{if(l.commit("setLoading",!0),n.value)c.value=n.value.user.name,i.value=n.value.user.location,d.value=n.value.user.email,p.value=n.value.user.language;else try{await l.dispatch("fetchUserDetails"),c.value=n.value.user.name,i.value=n.value.user.location,d.value=n.value.user.email,p.value=n.value.user.language}catch(e){console.error("Failed to load user details:",e)}l.commit("setLoading",!1)});const R=()=>{L.value.click()},A=e=>{const s=Array.from(e.target.files);s.length>0?(w.value=s,b.value=!0,D.value=!1):(w.value=null,b.value=!1)},M=()=>{C.push({name:"resetPassword"})},N=async()=>{l.commit("setLoading",!0),await T.updateUser({name:c.value,address:{street:i.value,latitude:k.value,longitude:I.value},email:d.value,language:p.value,profileImg:w.value}).then(e=>{e.success?(l.commit("setLoading",!1),v.value="success",m.value=y("User Successfully Updated"),r.value=!0,setTimeout(()=>{r.value=!1},2800),C.push({name:"swaps"})):(l.commit("setLoading",!1),v.value="error",m.value=y("Error Updating User"),r.value=!0,setTimeout(()=>{r.value=!1},2800))}).catch(e=>{l.commit("setLoading",!1),v.value="error",m.value=y("Error Updating User"),r.value=!0,setTimeout(()=>{r.value=!1},2800)})};return(e,s)=>(_(),h("div",le,[t("div",oe,[t("div",{class:"cont_logo selected",id:"ImageInput",onClick:R},[t("i",ne,[t("input",{type:"file",ref_key:"fileInput",ref:L,style:{display:"none"},required:"",onChange:A,accept:"image/*",multiple:""},null,544)])]),t("h1",ie,u(e.$t("Edit Profile")),1),t("form",{onSubmit:K(N,["prevent"]),class:"form"},[t("div",re,[f(t("input",{type:"text",id:"name","onUpdate:modelValue":s[0]||(s[0]=o=>c.value=o),required:"",class:"inputLogin",placeholder:e.$t("Full Name")},null,8,ue),[[$,c.value]])]),t("div",ce,[f(t("input",{type:"text",id:"city","onUpdate:modelValue":s[1]||(s[1]=o=>i.value=o),onInput:F,disabled:U.value,required:"",class:"inputLogin",placeholder:e.$t("Enter your address")},null,40,de),[[$,i.value]]),g.value.length?(_(),h("div",pe,[(_(!0),h(O,null,Q(g.value,(o,P)=>(_(),h("div",{key:P,class:"dropdown-item",onClick:Ce=>B(o)},u(o.display_name),9,ve))),128))])):W("",!0)]),t("div",me,[f(t("input",{type:"email",id:"email","onUpdate:modelValue":s[2]||(s[2]=o=>d.value=o),required:"",class:"inputLogin",placeholder:e.$t("E-mail")},null,8,ge),[[$,d.value]])]),t("div",he,[f(t("select",{id:"language","onUpdate:modelValue":s[3]||(s[3]=o=>p.value=o),class:"inputLogin",onChange:V},[t("option",fe,u(e.$t("Language")),1),t("option",_e,u(e.$t("English")),1),t("option",ye,u(e.$t("Spanish")),1)],544),[[X,p.value]])]),t("button",we,u(e.$t("Confirm")),1),t("p",{class:"reset-password-link",onClick:M},u(e.$t("Reset password")),1)],32)]),Y(ae,{type:v.value,text:m.value,launch:r.value},null,8,["type","text","launch"])]))}},Ie=x(Ue,[["__scopeId","data-v-f0791355"]]);export{Ie as default};
