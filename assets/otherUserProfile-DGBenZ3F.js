import{_ as P,b as T,r as n,o,c as l,a as i,t as C,F as R,p as I,n as B,e as L,v as D,x as V,G as x,d as F,D as M,j as y,A as k,k as O,m as q,h as w,i as U,u as j}from"./index-DSXtrz2A.js";import{p as z,r as G}from"./ratingCard-DdaCwpS8.js";import{t as J,a as H}from"./tabChatsRates-r6GlliSF.js";import{s as K}from"./successErrorCard-BYrUuwHA.js";import"./fallback_user-DHolJLBa.js";import"./fallback_thing_msg-BHafCOoy.js";const Q={class:"rating-card"},W={class:"card-header"},X={class:"labelRate"},Y={class:"rating-stars"},Z=["onClick"],ee={class:"input-container"},te=["placeholder"],ae={__name:"newRating",emits:["submitRating"],setup($,{emit:v}){T();const s=v,u=n(""),c=n(0),p=e=>{c.value=e},f=()=>{s("submitRating",{comment:u.value,rating:c.value}),u.value="",c.value=0};return(e,m)=>(o(),l("div",Q,[i("div",W,[i("h5",X,C(e.$t("Make a Review")),1),i("div",Y,[(o(),l(R,null,I(5,a=>i("span",{key:a,class:B(["star",{filled:a<=c.value}]),onClick:h=>p(a)}," ★ ",10,Z)),64))])]),i("div",ee,[L(i("textarea",{"onUpdate:modelValue":m[0]||(m[0]=a=>u.value=a),class:"comment-input",placeholder:e.$t("Enter your comment")},null,8,te),[[D,u.value]]),i("button",{onClick:f,class:"submit-button"},C(e.$t("Submit")),1)])]))}},se=P(ae,[["__scopeId","data-v-f17571cf"]]),re={key:1,class:"thereNo"},ne={__name:"otherUserProfile",setup($){const{t:v}=T(),s=O(),u=j(),p=q().query.userId,f=s.getters.getUserId,e=n(null),m=n(),a=n(),h=n(),_=n(""),b=n(""),d=n(!1),g=V(()=>e.value?{userProfileImg:e.value.user.profile_picture,userName:e.value.user.name,owner:e.value.owner,rating:e.value.average_rating,things:e.value.things_count,swaps:e.value.swaps}:{userProfileImg:"",userName:"",owner:!1,rating:0,things:0,swaps:0});x(()=>{s.commit("setLoading",!0)}),F(async()=>{try{s.commit("setLoading",!0),e.value=await s.dispatch("fetchUserProfile",p),m.value=e.value.things,a.value=e.value.ratings,h.value=e.value.rateable,M.replace()}catch(r){console.error("Error loading user profile:",r)}finally{s.commit("setLoading",!1)}});const E=r=>{try{s.dispatch("submitUserRating",{userId:f,ratedUserId:p,ratingData:r}),_.value="success",b.value=v("Rating Submitted Successfully"),d.value=!0,setTimeout(()=>{d.value=!1},2800)}catch(S){console.error("Failed to submit rating:",S),_.value="error",b.value=v("Error submitting rating"),d.value=!0,setTimeout(()=>{d.value=!1},2800)}finally{s.commit("setLoading",!1)}},A=r=>{u.push({name:"seeThing",query:{thing:JSON.stringify(r)}})};return(r,S)=>(o(),l("div",null,[y(K,{type:_.value,text:b.value,launch:d.value},null,8,["type","text","launch"]),y(z,{userProfileImg:g.value.userProfileImg,userName:g.value.userName,owner:!1,rating:g.value.rating,things:g.value.things,swaps:g.value.swaps,topProfile:!1},null,8,["userProfileImg","userName","rating","things","swaps"]),y(J,{tab1:r.$t("Things"),tab2:r.$t("Reviews")},{firstTap:k(()=>[i("div",null,[(o(!0),l(R,null,I(m.value,t=>(o(),w(H,{key:t.id,thing_id:t.id,name:t.name,description:t.description,price:t.price,condition:t.condition_name,imageUrl:t.imagesUrl,owner:!1,noOwner:!0,forOffer:!1,onSeeThing:N=>A(t)},null,8,["thing_id","name","description","price","condition","imageUrl","onSeeThing"]))),128))])]),secondTap:k(()=>[i("div",null,[h.value?(o(),w(se,{key:0,onSubmitRating:E})):U("",!0),(o(!0),l(R,null,I(a.value,(t,N)=>(o(),w(G,{key:N,userName:t.userName,ratingScore:t.ratingScore,ratingComment:t.ratingComment,ratingCreatedAt:t.ratingCreatedAt},null,8,["userName","ratingScore","ratingComment","ratingCreatedAt"]))),128)),!a.value||Array.isArray(a.value)&&a.value.length===0?(o(),l("h2",re,C(r.$t("No reviews yet—be the first to trade!")),1)):U("",!0)])]),_:1},8,["tab1","tab2"])]))}},de=P(ne,[["__scopeId","data-v-229e8873"]]);export{de as default};
