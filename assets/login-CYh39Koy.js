import{_ as T,b as S,r as i,d as $,c as C,a as t,t as l,w as L,e as p,v as h,f as E,g,h as I,i as D,o as R,u as V,S as M}from"./index-DoYgfSBw.js";import{s as P}from"./successErrorCard-D_meActD.js";import"./feather-otov0CnX.js";const U={class:"landing-page"},q={class:"container"},x={class:"title"},B={class:"input-group"},N=["placeholder"],A={class:"input-group"},F=["placeholder"],j={class:"terms-container"},z={class:"terms-checkbox"},G={class:"terms-text"},H={href:"https://www.trueque.art/#/privacy",target:"_blank"},J=["disabled"],K={__name:"login",setup(O){const{t:f,locale:_}=S(),s=D(),w=new M,n=V(),v=i("error"),c=i("The provided credentials are incorrect"),o=i(!1),d=i(""),m=i(""),u=i(!1);$(()=>{s.commit("setLoading",!1)});const b=()=>{n.push({name:"register"})},y=()=>{n.push({name:"emailPasswordReset"})},k=()=>{u.value&&(s.commit("setLoading",!0),w.login({email:d.value,password:m.value}).then(e=>{"token"in e?(s.dispatch("setAuthData",{token:e.token,userId:e.user_id}),localStorage.setItem("access_token",e.token),s.dispatch("initEcho"),_.value=e.language,s.commit("setCachedSwipes",e.things),s.commit("setUserDetails",e.userDetails),s.commit("setMatches",e.userChats),n.push({name:"swaps"})):"verify"in e?(v.value="info",c.value=e.message,o.value=!0,setTimeout(()=>{o.value=!1},2800),n.push({name:"verifyEmail"})):(o.value=!0,setTimeout(()=>{o.value=!1},2800))}).catch(e=>{c.value=f("Email or password are incorrect."),o.value=!0,setTimeout(()=>{o.value=!1},2800)}).finally(()=>{s.commit("setLoading",!1)}))};return(e,a)=>(R(),C("div",U,[t("div",q,[a[3]||(a[3]=t("div",{class:"cont_logo"},null,-1)),t("h1",x,l(e.$t("Log In")),1),t("form",{onSubmit:L(k,["prevent"]),class:"form"},[t("div",B,[p(t("input",{type:"email",id:"email","onUpdate:modelValue":a[0]||(a[0]=r=>d.value=r),required:"",class:"inputLogin",placeholder:e.$t("E-mail")},null,8,N),[[h,d.value]])]),t("div",A,[p(t("input",{type:"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=r=>m.value=r),required:"",class:"inputLogin",placeholder:e.$t("Password")},null,8,F),[[h,m.value]]),t("p",{class:"forgot",onClick:y},l(e.$t("Forgot your password?")),1)]),t("div",j,[t("label",z,[p(t("input",{type:"checkbox",id:"terms","onUpdate:modelValue":a[2]||(a[2]=r=>u.value=r)},null,512),[[E,u.value]]),t("span",G,[g(l(e.$t("I agree to the"))+" ",1),t("a",H,l(e.$t("Terms of Service and Privacy Policy")),1)])])]),t("button",{type:"submit",class:"submit-button",disabled:!u.value},l(e.$t("Log In")),9,J),t("p",{class:"createLabel",onClick:b},[g(l(e.$t("Don't have an account?"))+" ",1),t("strong",null,l(e.$t("Create one")),1)])],32),I(P,{type:v.value,text:c.value,launch:o.value},null,8,["type","text","launch"])])]))}},Y=T(K,[["__scopeId","data-v-50ea3229"]]);export{Y as default};
