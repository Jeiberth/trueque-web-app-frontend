import{t as A,a as v}from"./tabChatsRates-D8-SWiGb.js";import{c as U}from"./cashCard-B9X8mm4z.js";import{s as H}from"./successErrorCard--2aFiKOP.js";import{_ as N,b as x,d as D,D as j,r,c as d,j as h,a as t,t as J,A as C,k as Y,m as z,o,F as _,p as y,h as O,S as G,u as K}from"./index-DsHmD3ZB.js";import"./fallback_thing_msg-BHafCOoy.js";const P={class:"card-body"},Q={class:"user-info"},W={class:"offer"},X={__name:"makeOfferView",emits:["sendOfferEmit"],setup(Z,{emit:ee}){const{t:g}=x(),I=new G,f=Y(),S=z(),$=K(),k=S.query.userId,V=S.query.chatId;D(async()=>{const a=JSON.parse(S.query.data);i.value=a.myThings,c.value=a.hisThings,j.replace(),f.commit("setLoading",!1)});const i=r([]),c=r([]),n=r([]),l=r([]),m=r(0),p=r(0),T=r(""),w=r(""),u=r(!1),b=async()=>{if(n.value.length==0&&l.value.length==0&&m.value==0&&p.value==0){T.value="error",w.value=g("Select what you do not need anymore and choose what you want!"),u.value=!0,setTimeout(()=>{u.value=!1},2800);return}f.commit("setLoading",!0),await I.createOffer({to_user_id:k,chat_id:V,cash_value_requested:m.value,things_from_user:n.value,cash_value_offered:p.value,things_to_user:l.value}).then(a=>{f.commit("setLoading",!1),f.commit("addUserOffer",{userId:k,newOffer:a}),T.value="success",w.value=g("Your offer was send"),u.value=!0,setTimeout(()=>{u.value=!1},2800)}),$.push({name:"offers",query:{chatId:V,userId:k}})},q=a=>{m.value=a},R=a=>{p.value=a},B=a=>{n.value.push(a),i.value=i.value.filter(s=>s.id!==a.id)},E=a=>{l.value.push(a),c.value=c.value.filter(s=>s.id!==a.id)},L=a=>{i.value.push(a),n.value=n.value.filter(s=>s.id!==a.id)},M=a=>{c.value.push(a),l.value=l.value.filter(s=>s.id!==a.id)};return(a,s)=>(o(),d("div",null,[h(H,{type:T.value,text:w.value,launch:u.value},null,8,["type","text","launch"]),t("div",{class:"card",onClick:b,style:{cursor:"pointer"}},[s[0]||(s[0]=t("div",{class:"rap"},[t("i",{"data-feather":"send",class:"iconStyle",style:{color:"black"}})],-1)),t("div",P,[t("div",Q,[t("p",W,J(a.$t("Send Offer")),1)])])]),h(A,{tab1:a.$t("My Items"),tab2:a.$t("Their Items")},{firstTap:C(()=>[t("div",null,[h(U,{onChangeCashValue:q,cashValue:m.value,type:a.$t("Add cash amount (optional)")},null,8,["cashValue","type"]),(o(!0),d(_,null,y(n.value,e=>(o(),O(v,{key:e.id,thing_id:e.id,name:e.name,description:e.description,price:e.price,condition:e.condition_name,imageUrl:e.imagesUrl,owner:!1,noOwner:!1,forOffer:!0,isForOffer:!0,liked:e.liked,onSelectThingForOffer:F=>L(e)},null,8,["thing_id","name","description","price","condition","imageUrl","liked","onSelectThingForOffer"]))),128)),(o(!0),d(_,null,y(i.value,e=>(o(),O(v,{key:e.id,thing_id:e.id,name:e.name,description:e.description,price:e.price,condition:e.condition_name,imageUrl:e.imagesUrl,owner:!1,noOwner:!1,forOffer:!0,isForOffer:!1,liked:e.liked,onSelectThingForOffer:F=>B(e)},null,8,["thing_id","name","description","price","condition","imageUrl","liked","onSelectThingForOffer"]))),128))])]),secondTap:C(()=>[t("div",null,[h(U,{onChangeCashValue:R,cashValue:p.value,type:a.$t("Add cash amount (optional)")},null,8,["cashValue","type"]),(o(!0),d(_,null,y(l.value,e=>(o(),O(v,{key:e.id,thing_id:e.id,name:e.name,description:e.description,price:e.price,condition:e.condition_name,imageUrl:e.imagesUrl,owner:!1,noOwner:!1,forOffer:!0,isForOffer:!0,liked:e.liked,onSelectThingForOffer:F=>M(e)},null,8,["thing_id","name","description","price","condition","imageUrl","liked","onSelectThingForOffer"]))),128)),(o(!0),d(_,null,y(c.value,e=>(o(),O(v,{key:e.id,thing_id:e.id,name:e.name,description:e.description,price:e.price,condition:e.condition_name,imageUrl:e.imagesUrl,owner:!1,noOwner:!1,forOffer:!0,isForOffer:!1,liked:e.liked,onSelectThingForOffer:F=>E(e)},null,8,["thing_id","name","description","price","condition","imageUrl","liked","onSelectThingForOffer"]))),128))])]),_:1},8,["tab1","tab2"])]))}},ne=N(X,[["__scopeId","data-v-69fe1e96"]]);export{ne as default};
