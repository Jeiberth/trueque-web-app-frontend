import{t as M,a as R}from"./tabChatsRates-DMeR77N-.js";import{c as V}from"./cashCard-CQL8FCJ3.js";import{s as P}from"./successErrorCard-BYWK69lD.js";import{f as x}from"./feather-C4m1glYC.js";import{_ as Y,b as z,r as a,D as G,d as H,I as D,c as l,h as y,a as e,l as p,t as w,y as $,i as K,j as Q,o,F as B,k as N,A as q,u as W,S as X}from"./index-BMCsW35F.js";import"./fallback_thing_msg-BHafCOoy.js";const Z={key:0,class:"card"},ee={class:"rap"},se={key:0,"data-feather":"check-circle",class:"iconStyle",style:{color:"green"}},ae={key:1,"data-feather":"x-circle",class:"iconStyle",style:{color:"red"}},te={key:2,"data-feather":"clock",class:"iconStyle",style:{color:"darkcyan"}},oe={class:"card-body"},re={class:"user-info"},ce={class:"offer"},le={key:1,class:"containerDoubleCard"},ne={class:"card-body"},ie={class:"user-info"},ue={class:"offer"},de={class:"card-body"},fe={class:"user-info"},ve={class:"offer"},me={__name:"lookAtOffer",setup(pe){const{t:i}=z(),c=K(),S=Q(),F=W(),C=new X,h=S.query.offerId;a(0),a(0);const g=a(""),k=a(""),u=a(),d=a(),f=a(),v=a(),m=a(),r=a(),O=a(),b=a(),I=a(),U=a(),A=S.query.userId,n=a();G(()=>{c.commit("setLoading",!0)}),H(async()=>{const t=JSON.parse(S.query.offer);r.value=t.offerStatus,O.value=t.myThings,b.value=t.hisThings,I.value=t.myCash,U.value=t.hisCash,T(),await D(),x.replace(),c.commit("setLoading",!1)});const L=t=>{F.push({name:"seeThing",query:{thing:JSON.stringify(t)}})},T=async()=>{r.value==1||r.value==2?(m.value=i("Accepted"),d.value=!0,f.value=!1,v.value=!1,n.value=!1):r.value==3||r.value==4?(m.value=i("Rejected"),d.value=!1,f.value=!0,v.value=!1,n.value=!1):r.value==5?(m.value=i("Pending"),d.value=!1,f.value=!1,v.value=!0,n.value=!1):r.value==6&&(m.value="",d.value=!1,f.value=!1,v.value=!1,n.value=!0),await D(()=>{x.replace()})},j=async()=>{c.commit("setLoading",!0),await C.changeOfferStatus({offer_id:h,status_id:3}).then(t=>{g.value="success",k.value=i("The offer was denied"),u.value=!0,r.value=3,T(),c.commit("updateUserOfferStatus",{userId:A,offerId:h,newStatusId:3}),setTimeout(()=>{u.value=!1},2800)}),c.commit("setLoading",!1)},E=async()=>{c.commit("setLoading",!0),await C.changeOfferStatus({offer_id:h,status_id:1}).then(t=>{g.value="success",k.value=i("The offer was accepted"),u.value=!0,r.value=1,T(),c.commit("updateUserOfferStatus",{userId:A,offerId:h,newStatusId:1}),setTimeout(()=>{u.value=!1},2800)}),c.commit("setLoading",!1)};return(t,_)=>(o(),l("div",null,[y(P,{type:g.value,text:k.value,launch:u.value},null,8,["type","text","launch"]),n.value?p("",!0):(o(),l("div",Z,[e("div",ee,[d.value?(o(),l("i",se)):p("",!0),f.value?(o(),l("i",ae)):p("",!0),v.value?(o(),l("i",te)):p("",!0)]),e("div",oe,[e("div",re,[e("p",ce,w(m.value),1)])])])),n.value?(o(),l("div",le,[e("div",{class:"doubleCard",onClick:E},[_[0]||(_[0]=e("div",{class:"rap"},[e("i",{"data-feather":"check-circle",class:"iconStyle",style:{color:"green"}})],-1)),e("div",ne,[e("div",ie,[e("p",ue,w(t.$t("Accept")),1)])])]),e("div",{class:"doubleCard",onClick:j},[_[1]||(_[1]=e("div",{class:"rap"},[e("i",{"data-feather":"x-circle",class:"iconStyle",style:{color:"red"}})],-1)),e("div",de,[e("div",fe,[e("p",ve,w(t.$t("Deny")),1)])])])])):p("",!0),y(M,{tab1:t.$t("My Items"),tab2:t.$t("Their Items")},{firstTap:$(()=>[e("div",null,[y(V,{type:"Cash amount",isDisabled:!0,cashValue:parseInt(I.value)},null,8,["cashValue"]),(o(!0),l(B,null,N(O.value,s=>(o(),q(R,{key:s.id,thing_id:s.id,name:s.name,description:s.description,price:s.price,condition:s.condition_name,imageUrl:s.imagesUrl,owner:!1,noOwner:!0,forOffer:!1,isForOffer:!1,onSeeThing:J=>L(s)},null,8,["thing_id","name","description","price","condition","imageUrl","onSeeThing"]))),128))])]),secondTap:$(()=>[e("div",null,[y(V,{type:"Cash amount",isDisabled:!0,cashValue:parseInt(U.value)},null,8,["cashValue"]),(o(!0),l(B,null,N(b.value,s=>(o(),q(R,{key:s.id,thing_id:s.id,name:s.name,description:s.description,price:s.price,condition:s.condition_name,imageUrl:s.imagesUrl,owner:!1,noOwner:!0,forOffer:!1,isForOffer:!1,onSeeThing:J=>L(s)},null,8,["thing_id","name","description","price","condition","imageUrl","onSeeThing"]))),128))])]),_:1},8,["tab1","tab2"])]))}},Te=Y(me,[["__scopeId","data-v-4f23f7f6"]]);export{Te as default};
