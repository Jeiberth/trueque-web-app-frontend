import{s as ai,S as ri}from"./successErrorCard-DH-Dz1XJ.js";import{_ as yt,H as ni,o as D,c as k,a as f,e as ie,v as Ae,I as oi,t as b,q as be,F as ve,p as me,i as Le,k as Et,r as S,d as $e,G as We,J as li,x as wt,K as De,L as vt,M as ci,D as ge,b as ui,E as mt,h as gt,j as Tt,S as hi,l as di}from"./index-0guTc2cZ.js";const fi=ni({name:"searchelement",emits:["searchThingsEmit","showFiltersEmit"],setup(c,{emit:u}){const L=Et(),g=S({searchTerm:"",price:"",condition:"",weight:"",category:"",material:"",color:"",range:""}),p=S(null),V=S(!1),o=S([]),T=S([]),C=S([]),E=S([]),P=S(!1),R=F=>g.value.category.includes(F),H=(F,Q)=>{if(Q)g.value.category.push(F);else{const y=g.value.category.indexOf(F);y>-1&&g.value.category.splice(y,1)}},O=()=>{V.value=!1,u("searchThingsEmit",g.value),g.value={searchTerm:"",price:"",condition:"",weight:"",category:"",range:"",material:"",color:""}},J=()=>{V.value=!0,u("showFiltersEmit")},v=F=>{p.value&&!p.value.contains(F.target)&&(P.value=!1)};return $e(async()=>{document.addEventListener("click",v),o.value=L.getters.getConditions,T.value=L.getters.getCategories,C.value=L.getters.getMaterials,E.value=L.getters.getColors}),We(()=>{document.removeEventListener("click",v)}),{filters:g,conditions:o,categories:T,materials:C,colors:E,showCategories:P,isChecked:R,updateCategories:H,searchThings:O,handleClickOutside:v,dropdown:p,showFilters:V,showFiltersMethod:J}}}),pi={class:"search-filter-container"},vi={class:"input-group"},mi=["placeholder"],gi={key:0,class:"filter-options-container"},Ti={class:"filter-card"},yi=["placeholder"],Ei={class:"filter-card"},wi=["placeholder"],_i={value:"",disabled:"",selected:""},Ii=["value"],Si={class:"filter-card"},Ci=["placeholder"],Pi={value:"",disabled:"",selected:""},Ni=["value"],Mi={value:"",disabled:"",selected:""},Oi=["value"],Ai={value:"",disabled:"",selected:""},bi=["value"];function Di(c,u,L,g,p,V){return D(),k("div",pi,[f("div",vi,[ie(f("input",{"onUpdate:modelValue":u[0]||(u[0]=o=>c.filters.searchTerm=o),type:"text",placeholder:c.$t("Search..."),class:"inputLogin",onClick:u[1]||(u[1]=(...o)=>c.showFiltersMethod&&c.showFiltersMethod(...o)),onKeypress:u[2]||(u[2]=oi((...o)=>c.searchThings&&c.searchThings(...o),["enter"]))},null,40,mi),[[Ae,c.filters.searchTerm]]),f("button",{onClick:u[3]||(u[3]=(...o)=>c.searchThings&&c.searchThings(...o)),class:"submit-button"},[f("span",null,b(c.$t("Search")),1)])]),c.showFilters?(D(),k("div",gi,[f("div",Ti,[f("span",null,b(c.$t("$")),1),ie(f("input",{type:"number","onUpdate:modelValue":u[4]||(u[4]=o=>c.filters.price=o),placeholder:c.$t("Max Price"),class:"filter-input"},null,8,yi),[[Ae,c.filters.price]])]),f("div",Ei,[ie(f("input",{type:"number","onUpdate:modelValue":u[5]||(u[5]=o=>c.filters.range=o),placeholder:c.$t("Range"),class:"filter-input"},null,8,wi),[[Ae,c.filters.range]]),f("span",null,b(c.$t("Km")),1)]),ie(f("select",{"onUpdate:modelValue":u[6]||(u[6]=o=>c.filters.condition=o),class:"filter-card select-filter"},[f("option",_i,b(c.$t("Condition")),1),(D(!0),k(ve,null,me(c.conditions,o=>(D(),k("option",{key:o.id,value:o.id},b(o.name),9,Ii))),128))],512),[[be,c.filters.condition]]),f("div",Si,[ie(f("input",{type:"number","onUpdate:modelValue":u[7]||(u[7]=o=>c.filters.weight=o),placeholder:c.$t("Max Weight"),class:"filter-input"},null,8,Ci),[[Ae,c.filters.weight]]),f("span",null,b(c.$t("Kg")),1)]),ie(f("select",{"onUpdate:modelValue":u[8]||(u[8]=o=>c.filters.category=o),class:"filter-card select-filter"},[f("option",Pi,b(c.$t("Category")),1),(D(!0),k(ve,null,me(c.categories,o=>(D(),k("option",{key:o.id,value:o.id},b(o.name),9,Ni))),128))],512),[[be,c.filters.category]]),ie(f("select",{"onUpdate:modelValue":u[9]||(u[9]=o=>c.filters.material=o),class:"filter-card select-filter"},[f("option",Mi,b(c.$t("Material")),1),(D(!0),k(ve,null,me(c.materials,o=>(D(),k("option",{key:o.id,value:o.id},b(o.name),9,Oi))),128))],512),[[be,c.filters.material]]),ie(f("select",{"onUpdate:modelValue":u[10]||(u[10]=o=>c.filters.color=o),class:"filter-card select-filter"},[f("option",Ai,b(c.$t("Color")),1),(D(!0),k(ve,null,me(c.colors,o=>(D(),k("option",{key:o.id,value:o.id},b(o.name),9,bi))),128))],512),[[be,c.filters.color]])])):Le("",!0)])}const Li=yt(fi,[["render",Di],["__scopeId","data-v-bebaff61"]]);var _t={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(c){(function(u,L,g,p){var V=["","webkit","Moz","MS","ms","o"],o=L.createElement("div"),T="function",C=Math.round,E=Math.abs,P=Date.now;function R(e,t,i){return setTimeout(l(e,i),t)}function H(e,t,i){return Array.isArray(e)?(O(e,i[t],i),!0):!1}function O(e,t,i){var s;if(e)if(e.forEach)e.forEach(t,i);else if(e.length!==p)for(s=0;s<e.length;)t.call(i,e[s],s,e),s++;else for(s in e)e.hasOwnProperty(s)&&t.call(i,e[s],s,e)}function J(e,t,i){var s="DEPRECATED METHOD: "+t+`
`+i+` AT 
`;return function(){var a=new Error("get-stack-trace"),r=a&&a.stack?a.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",d=u.console&&(u.console.warn||u.console.log);return d&&d.call(u.console,s,r),e.apply(this,arguments)}}var v;typeof Object.assign!="function"?v=function(t){if(t===p||t===null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),s=1;s<arguments.length;s++){var a=arguments[s];if(a!==p&&a!==null)for(var r in a)a.hasOwnProperty(r)&&(i[r]=a[r])}return i}:v=Object.assign;var F=J(function(t,i,s){for(var a=Object.keys(i),r=0;r<a.length;)(!s||s&&t[a[r]]===p)&&(t[a[r]]=i[a[r]]),r++;return t},"extend","Use `assign`."),Q=J(function(t,i){return F(t,i,!0)},"merge","Use `assign`.");function y(e,t,i){var s=t.prototype,a;a=e.prototype=Object.create(s),a.constructor=e,a._super=s,i&&v(a,i)}function l(e,t){return function(){return e.apply(t,arguments)}}function n(e,t){return typeof e==T?e.apply(t&&t[0]||p,t):e}function h(e,t){return e===p?t:e}function m(e,t,i){O(q(t),function(s){e.addEventListener(s,i,!1)})}function w(e,t,i){O(q(t),function(s){e.removeEventListener(s,i,!1)})}function $(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function _(e,t){return e.indexOf(t)>-1}function q(e){return e.trim().split(/\s+/g)}function N(e,t,i){if(e.indexOf&&!i)return e.indexOf(t);for(var s=0;s<e.length;){if(i&&e[s][i]==t||!i&&e[s]===t)return s;s++}return-1}function Te(e){return Array.prototype.slice.call(e,0)}function Ge(e,t,i){for(var s=[],a=[],r=0;r<e.length;){var d=e[r][t];N(a,d)<0&&s.push(e[r]),a[r]=d,r++}return s=s.sort(function(A,Y){return A[t]>Y[t]}),s}function ye(e,t){for(var i,s,a=t[0].toUpperCase()+t.slice(1),r=0;r<V.length;){if(i=V[r],s=i?i+a:t,s in e)return s;r++}return p}var It=1;function St(){return It++}function Be(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||u}var Ct=/mobile|tablet|ip(ad|hone|od)|android/i,Ze="ontouchstart"in u,Pt=ye(u,"PointerEvent")!==p,Nt=Ze&&Ct.test(navigator.userAgent),oe="touch",Mt="pen",Re="mouse",Ot="kinect",At=25,U=1,se=2,I=4,X=8,Ee=1,le=2,ce=4,ue=8,he=16,G=le|ce,ae=ue|he,je=G|ae,Ke=["x","y"],we=["clientX","clientY"];function z(e,t){var i=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(s){n(e.options.enable,[e])&&i.handler(s)},this.init()}z.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(Be(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(Be(this.element),this.evWin,this.domHandler)}};function bt(e){var t,i=e.options.inputClass;return i?t=i:Pt?t=Ye:Nt?t=Se:Ze?t=ke:t=Ie,new t(e,Dt)}function Dt(e,t,i){var s=i.pointers.length,a=i.changedPointers.length,r=t&U&&s-a===0,d=t&(I|X)&&s-a===0;i.isFirst=!!r,i.isFinal=!!d,r&&(e.session={}),i.eventType=t,Lt(e,i),e.emit("hammer.input",i),e.recognize(i),e.session.prevInput=i}function Lt(e,t){var i=e.session,s=t.pointers,a=s.length;i.firstInput||(i.firstInput=Je(t)),a>1&&!i.firstMultiple?i.firstMultiple=Je(t):a===1&&(i.firstMultiple=!1);var r=i.firstInput,d=i.firstMultiple,M=d?d.center:r.center,A=t.center=Qe(s);t.timeStamp=P(),t.deltaTime=t.timeStamp-r.timeStamp,t.angle=Ue(M,A),t.distance=_e(M,A),Rt(i,t),t.offsetDirection=tt(t.deltaX,t.deltaY);var Y=et(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=Y.x,t.overallVelocityY=Y.y,t.overallVelocity=E(Y.x)>E(Y.y)?Y.x:Y.y,t.scale=d?kt(d.pointers,s):1,t.rotation=d?Yt(d.pointers,s):0,t.maxPointers=i.prevInput?t.pointers.length>i.prevInput.maxPointers?t.pointers.length:i.prevInput.maxPointers:t.pointers.length,Ut(i,t);var Z=e.element;$(t.srcEvent.target,Z)&&(Z=t.srcEvent.target),t.target=Z}function Rt(e,t){var i=t.center,s=e.offsetDelta||{},a=e.prevDelta||{},r=e.prevInput||{};(t.eventType===U||r.eventType===I)&&(a=e.prevDelta={x:r.deltaX||0,y:r.deltaY||0},s=e.offsetDelta={x:i.x,y:i.y}),t.deltaX=a.x+(i.x-s.x),t.deltaY=a.y+(i.y-s.y)}function Ut(e,t){var i=e.lastInterval||t,s=t.timeStamp-i.timeStamp,a,r,d,M;if(t.eventType!=X&&(s>At||i.velocity===p)){var A=t.deltaX-i.deltaX,Y=t.deltaY-i.deltaY,Z=et(s,A,Y);r=Z.x,d=Z.y,a=E(Z.x)>E(Z.y)?Z.x:Z.y,M=tt(A,Y),e.lastInterval=t}else a=i.velocity,r=i.velocityX,d=i.velocityY,M=i.direction;t.velocity=a,t.velocityX=r,t.velocityY=d,t.direction=M}function Je(e){for(var t=[],i=0;i<e.pointers.length;)t[i]={clientX:C(e.pointers[i].clientX),clientY:C(e.pointers[i].clientY)},i++;return{timeStamp:P(),pointers:t,center:Qe(t),deltaX:e.deltaX,deltaY:e.deltaY}}function Qe(e){var t=e.length;if(t===1)return{x:C(e[0].clientX),y:C(e[0].clientY)};for(var i=0,s=0,a=0;a<t;)i+=e[a].clientX,s+=e[a].clientY,a++;return{x:C(i/t),y:C(s/t)}}function et(e,t,i){return{x:t/e||0,y:i/e||0}}function tt(e,t){return e===t?Ee:E(e)>=E(t)?e<0?le:ce:t<0?ue:he}function _e(e,t,i){i||(i=Ke);var s=t[i[0]]-e[i[0]],a=t[i[1]]-e[i[1]];return Math.sqrt(s*s+a*a)}function Ue(e,t,i){i||(i=Ke);var s=t[i[0]]-e[i[0]],a=t[i[1]]-e[i[1]];return Math.atan2(a,s)*180/Math.PI}function Yt(e,t){return Ue(t[1],t[0],we)+Ue(e[1],e[0],we)}function kt(e,t){return _e(t[0],t[1],we)/_e(e[0],e[1],we)}var Ht={mousedown:U,mousemove:se,mouseup:I},Ft="mousedown",Xt="mousemove mouseup";function Ie(){this.evEl=Ft,this.evWin=Xt,this.pressed=!1,z.apply(this,arguments)}y(Ie,z,{handler:function(t){var i=Ht[t.type];i&U&&t.button===0&&(this.pressed=!0),i&se&&t.which!==1&&(i=I),this.pressed&&(i&I&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[t],changedPointers:[t],pointerType:Re,srcEvent:t}))}});var Vt={pointerdown:U,pointermove:se,pointerup:I,pointercancel:X,pointerout:X},qt={2:oe,3:Mt,4:Re,5:Ot},it="pointerdown",st="pointermove pointerup pointercancel";u.MSPointerEvent&&!u.PointerEvent&&(it="MSPointerDown",st="MSPointerMove MSPointerUp MSPointerCancel");function Ye(){this.evEl=it,this.evWin=st,z.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}y(Ye,z,{handler:function(t){var i=this.store,s=!1,a=t.type.toLowerCase().replace("ms",""),r=Vt[a],d=qt[t.pointerType]||t.pointerType,M=d==oe,A=N(i,t.pointerId,"pointerId");r&U&&(t.button===0||M)?A<0&&(i.push(t),A=i.length-1):r&(I|X)&&(s=!0),!(A<0)&&(i[A]=t,this.callback(this.manager,r,{pointers:i,changedPointers:[t],pointerType:d,srcEvent:t}),s&&i.splice(A,1))}});var zt={touchstart:U,touchmove:se,touchend:I,touchcancel:X},xt="touchstart",$t="touchstart touchmove touchend touchcancel";function at(){this.evTarget=xt,this.evWin=$t,this.started=!1,z.apply(this,arguments)}y(at,z,{handler:function(t){var i=zt[t.type];if(i===U&&(this.started=!0),!!this.started){var s=Wt.call(this,t,i);i&(I|X)&&s[0].length-s[1].length===0&&(this.started=!1),this.callback(this.manager,i,{pointers:s[0],changedPointers:s[1],pointerType:oe,srcEvent:t})}}});function Wt(e,t){var i=Te(e.touches),s=Te(e.changedTouches);return t&(I|X)&&(i=Ge(i.concat(s),"identifier")),[i,s]}var Gt={touchstart:U,touchmove:se,touchend:I,touchcancel:X},Bt="touchstart touchmove touchend touchcancel";function Se(){this.evTarget=Bt,this.targetIds={},z.apply(this,arguments)}y(Se,z,{handler:function(t){var i=Gt[t.type],s=Zt.call(this,t,i);s&&this.callback(this.manager,i,{pointers:s[0],changedPointers:s[1],pointerType:oe,srcEvent:t})}});function Zt(e,t){var i=Te(e.touches),s=this.targetIds;if(t&(U|se)&&i.length===1)return s[i[0].identifier]=!0,[i,i];var a,r,d=Te(e.changedTouches),M=[],A=this.target;if(r=i.filter(function(Y){return $(Y.target,A)}),t===U)for(a=0;a<r.length;)s[r[a].identifier]=!0,a++;for(a=0;a<d.length;)s[d[a].identifier]&&M.push(d[a]),t&(I|X)&&delete s[d[a].identifier],a++;if(M.length)return[Ge(r.concat(M),"identifier"),M]}var jt=2500,rt=25;function ke(){z.apply(this,arguments);var e=l(this.handler,this);this.touch=new Se(this.manager,e),this.mouse=new Ie(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}y(ke,z,{handler:function(t,i,s){var a=s.pointerType==oe,r=s.pointerType==Re;if(!(r&&s.sourceCapabilities&&s.sourceCapabilities.firesTouchEvents)){if(a)Kt.call(this,i,s);else if(r&&Jt.call(this,s))return;this.callback(t,i,s)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Kt(e,t){e&U?(this.primaryTouch=t.changedPointers[0].identifier,nt.call(this,t)):e&(I|X)&&nt.call(this,t)}function nt(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY};this.lastTouches.push(i);var s=this.lastTouches,a=function(){var r=s.indexOf(i);r>-1&&s.splice(r,1)};setTimeout(a,jt)}}function Jt(e){for(var t=e.srcEvent.clientX,i=e.srcEvent.clientY,s=0;s<this.lastTouches.length;s++){var a=this.lastTouches[s],r=Math.abs(t-a.x),d=Math.abs(i-a.y);if(r<=rt&&d<=rt)return!0}return!1}var ot=ye(o.style,"touchAction"),lt=ot!==p,ct="compute",ut="auto",He="manipulation",re="none",de="pan-x",fe="pan-y",Ce=ei();function Fe(e,t){this.manager=e,this.set(t)}Fe.prototype={set:function(e){e==ct&&(e=this.compute()),lt&&this.manager.element.style&&Ce[e]&&(this.manager.element.style[ot]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return O(this.manager.recognizers,function(t){n(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Qt(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,i=e.offsetDirection;if(this.manager.session.prevented){t.preventDefault();return}var s=this.actions,a=_(s,re)&&!Ce[re],r=_(s,fe)&&!Ce[fe],d=_(s,de)&&!Ce[de];if(a){var M=e.pointers.length===1,A=e.distance<2,Y=e.deltaTime<250;if(M&&A&&Y)return}if(!(d&&r)&&(a||r&&i&G||d&&i&ae))return this.preventSrc(t)},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};function Qt(e){if(_(e,re))return re;var t=_(e,de),i=_(e,fe);return t&&i?re:t||i?t?de:fe:_(e,He)?He:ut}function ei(){if(!lt)return!1;var e={},t=u.CSS&&u.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){e[i]=t?u.CSS.supports("touch-action",i):!0}),e}var Pe=1,x=2,ne=4,ee=8,j=ee,pe=16,B=32;function K(e){this.options=v({},this.defaults,e||{}),this.id=St(),this.manager=null,this.options.enable=h(this.options.enable,!0),this.state=Pe,this.simultaneous={},this.requireFail=[]}K.prototype={defaults:{},set:function(e){return v(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(H(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=Ne(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return H(e,"dropRecognizeWith",this)?this:(e=Ne(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(H(e,"requireFailure",this))return this;var t=this.requireFail;return e=Ne(e,this),N(t,e)===-1&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(H(e,"dropRequireFailure",this))return this;e=Ne(e,this);var t=N(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,i=this.state;function s(a){t.manager.emit(a,e)}i<ee&&s(t.options.event+ht(i)),s(t.options.event),e.additionalEvent&&s(e.additionalEvent),i>=ee&&s(t.options.event+ht(i))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=B},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(B|Pe)))return!1;e++}return!0},recognize:function(e){var t=v({},e);if(!n(this.options.enable,[this,t])){this.reset(),this.state=B;return}this.state&(j|pe|B)&&(this.state=Pe),this.state=this.process(t),this.state&(x|ne|ee|pe)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}};function ht(e){return e&pe?"cancel":e&ee?"end":e&ne?"move":e&x?"start":""}function dt(e){return e==he?"down":e==ue?"up":e==le?"left":e==ce?"right":""}function Ne(e,t){var i=t.manager;return i?i.get(e):e}function W(){K.apply(this,arguments)}y(W,K,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return t===0||e.pointers.length===t},process:function(e){var t=this.state,i=e.eventType,s=t&(x|ne),a=this.attrTest(e);return s&&(i&X||!a)?t|pe:s||a?i&I?t|ee:t&x?t|ne:x:B}});function Me(){W.apply(this,arguments),this.pX=null,this.pY=null}y(Me,W,{defaults:{event:"pan",threshold:10,pointers:1,direction:je},getTouchAction:function(){var e=this.options.direction,t=[];return e&G&&t.push(fe),e&ae&&t.push(de),t},directionTest:function(e){var t=this.options,i=!0,s=e.distance,a=e.direction,r=e.deltaX,d=e.deltaY;return a&t.direction||(t.direction&G?(a=r===0?Ee:r<0?le:ce,i=r!=this.pX,s=Math.abs(e.deltaX)):(a=d===0?Ee:d<0?ue:he,i=d!=this.pY,s=Math.abs(e.deltaY))),e.direction=a,i&&s>t.threshold&&a&t.direction},attrTest:function(e){return W.prototype.attrTest.call(this,e)&&(this.state&x||!(this.state&x)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=dt(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}});function Xe(){W.apply(this,arguments)}y(Xe,W,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[re]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&x)},emit:function(e){if(e.scale!==1){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}});function Ve(){K.apply(this,arguments),this._timer=null,this._input=null}y(Ve,K,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ut]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,s=e.distance<t.threshold,a=e.deltaTime>t.time;if(this._input=e,!s||!i||e.eventType&(I|X)&&!a)this.reset();else if(e.eventType&U)this.reset(),this._timer=R(function(){this.state=j,this.tryEmit()},t.time,this);else if(e.eventType&I)return j;return B},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===j&&(e&&e.eventType&I?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=P(),this.manager.emit(this.options.event,this._input)))}});function qe(){W.apply(this,arguments)}y(qe,W,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[re]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&x)}});function ze(){W.apply(this,arguments)}y(ze,W,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:G|ae,pointers:1},getTouchAction:function(){return Me.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction,i;return t&(G|ae)?i=e.overallVelocity:t&G?i=e.overallVelocityX:t&ae&&(i=e.overallVelocityY),this._super.attrTest.call(this,e)&&t&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&E(i)>this.options.velocity&&e.eventType&I},emit:function(e){var t=dt(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}});function Oe(){K.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}y(Oe,K,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[He]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,s=e.distance<t.threshold,a=e.deltaTime<t.time;if(this.reset(),e.eventType&U&&this.count===0)return this.failTimeout();if(s&&a&&i){if(e.eventType!=I)return this.failTimeout();var r=this.pTime?e.timeStamp-this.pTime<t.interval:!0,d=!this.pCenter||_e(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,!d||!r?this.count=1:this.count+=1,this._input=e;var M=this.count%t.taps;if(M===0)return this.hasRequireFailures()?(this._timer=R(function(){this.state=j,this.tryEmit()},t.interval,this),x):j}return B},failTimeout:function(){return this._timer=R(function(){this.state=B},this.options.interval,this),B},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==j&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function te(e,t){return t=t||{},t.recognizers=h(t.recognizers,te.defaults.preset),new xe(e,t)}te.VERSION="2.0.7",te.defaults={domEvents:!1,touchAction:ct,enable:!0,inputTarget:null,inputClass:null,preset:[[qe,{enable:!1}],[Xe,{enable:!1},["rotate"]],[ze,{direction:G}],[Me,{direction:G},["swipe"]],[Oe],[Oe,{event:"doubletap",taps:2},["tap"]],[Ve]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ti=1,ft=2;function xe(e,t){this.options=v({},te.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=bt(this),this.touchAction=new Fe(this,this.options.touchAction),pt(this,!0),O(this.options.recognizers,function(i){var s=this.add(new i[0](i[1]));i[2]&&s.recognizeWith(i[2]),i[3]&&s.requireFailure(i[3])},this)}xe.prototype={set:function(e){return v(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?ft:ti},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var i,s=this.recognizers,a=t.curRecognizer;(!a||a&&a.state&j)&&(a=t.curRecognizer=null);for(var r=0;r<s.length;)i=s[r],t.stopped!==ft&&(!a||i==a||i.canRecognizeWith(a))?i.recognize(e):i.reset(),!a&&i.state&(x|ne|ee)&&(a=t.curRecognizer=i),r++}},get:function(e){if(e instanceof K)return e;for(var t=this.recognizers,i=0;i<t.length;i++)if(t[i].options.event==e)return t[i];return null},add:function(e){if(H(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(H(e,"remove",this))return this;if(e=this.get(e),e){var t=this.recognizers,i=N(t,e);i!==-1&&(t.splice(i,1),this.touchAction.update())}return this},on:function(e,t){if(e!==p&&t!==p){var i=this.handlers;return O(q(e),function(s){i[s]=i[s]||[],i[s].push(t)}),this}},off:function(e,t){if(e!==p){var i=this.handlers;return O(q(e),function(s){t?i[s]&&i[s].splice(N(i[s],t),1):delete i[s]}),this}},emit:function(e,t){this.options.domEvents&&ii(e,t);var i=this.handlers[e]&&this.handlers[e].slice();if(!(!i||!i.length)){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var s=0;s<i.length;)i[s](t),s++}},destroy:function(){this.element&&pt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function pt(e,t){var i=e.element;if(i.style){var s;O(e.options.cssProps,function(a,r){s=ye(i.style,r),t?(e.oldCssProps[s]=i.style[s],i.style[s]=a):i.style[s]=e.oldCssProps[s]||""}),t||(e.oldCssProps={})}}function ii(e,t){var i=L.createEvent("Event");i.initEvent(e,!0,!0),i.gesture=t,t.target.dispatchEvent(i)}v(te,{INPUT_START:U,INPUT_MOVE:se,INPUT_END:I,INPUT_CANCEL:X,STATE_POSSIBLE:Pe,STATE_BEGAN:x,STATE_CHANGED:ne,STATE_ENDED:ee,STATE_RECOGNIZED:j,STATE_CANCELLED:pe,STATE_FAILED:B,DIRECTION_NONE:Ee,DIRECTION_LEFT:le,DIRECTION_RIGHT:ce,DIRECTION_UP:ue,DIRECTION_DOWN:he,DIRECTION_HORIZONTAL:G,DIRECTION_VERTICAL:ae,DIRECTION_ALL:je,Manager:xe,Input:z,TouchAction:Fe,TouchInput:Se,MouseInput:Ie,PointerEventInput:Ye,TouchMouseInput:ke,SingleTouchInput:at,Recognizer:K,AttrRecognizer:W,Tap:Oe,Pan:Me,Swipe:ze,Pinch:Xe,Rotate:qe,Press:Ve,on:m,off:w,each:O,merge:Q,extend:F,assign:v,inherit:y,bindFn:l,prefixed:ye});var si=typeof u<"u"?u:typeof self<"u"?self:{};si.Hammer=te,c.exports?c.exports=te:u[g]=te})(window,document,"Hammer")})(_t);var Ri=_t.exports;const Ui=li(Ri),Yi="/assets/fallback_swipe-6zZm0tV6.jpg",ki={class:"tinder--cards"},Hi=["src"],Fi={class:"card-details"},Xi={class:"title-card"},Vi={class:"badges"},qi={class:"badge badge-price"},zi={class:"badge badge-condition"},xi={class:"description-card"},$i={__name:"swipeCard",props:{things:{type:Array,required:!0}},emits:["swipeRight","swipeLeft","allSwiped"],setup(c,{emit:u}){function L(l){l.target.src=Yi}const g=c,p=u,V=S(null),o=S([]),T=S([]),C=S(0),E=S(null),P=S(!1),R=wt(()=>l=>{if(l===0)return{transform:E.value?`translateX(${E.value*100}%) rotate(${E.value*30}deg)`:"",opacity:E.value?0:1,transition:P.value?"transform 0.4s ease-out, opacity 0.4s ease-out":"none",zIndex:o.value.length-l};if(l>0&&l<3){const n=1-l*.05,h=-l*10;return{transform:`scale(${n}) translateY(${h}px)`,zIndex:o.value.length-l}}else return{display:"none",zIndex:o.value.length-l}}),H=l=>{if(l){l.classList.remove("moving"),l.style.transform="",l.style.opacity="",l.style.transition="transform 0.4s ease-out, opacity 0.4s ease-out";const n=l.querySelector(".swipe-left"),h=l.querySelector(".swipe-right");n&&(n.style.opacity=0),h&&(h.style.opacity=0),ge.replace()}E.value=null,P.value=!1},O=(l,n)=>{if(P.value||T.value.length===0)return;n.classList.add("moving");const h=V.value,m=l.deltaX;h.classList.toggle("tinder_love",m>0),h.classList.toggle("tinder_nope",m<0),n.style.transform=`translate(${m}px, ${l.deltaY}px) rotate(${m*.03}deg)`;const w=Math.abs(m)/200,$=n.querySelector(".swipe-left"),_=n.querySelector(".swipe-right");$&&($.style.opacity=m<0?w:0),_&&(_.style.opacity=m>0?w:0),ge.replace()},J=(l,n)=>{var $;if(P.value||T.value.length===0)return;const h=l.deltaX,m=h>0;if(Math.abs(h)>80){E.value=m?1:-1,P.value=!0;const _=($=T.value[0])==null?void 0:$.id;setTimeout(()=>{if(_){const q=o.value.find(N=>N.id===_);o.value=o.value.map(N=>N.id===_?{...N,swiped:!0}:N),q&&(console.log(m),p(m?"swipeRight":"swipeLeft",q)),C.value++,v(),De(()=>H(n))}},300)}else{H(n);const _=n.querySelector(".swipe-left"),q=n.querySelector(".swipe-right");_&&(_.style.opacity=0),q&&(q.style.opacity=0)}},v=()=>{T.value=o.value.slice(C.value,C.value+3).filter(l=>!l.swiped),(T.value.length===0&&o.value.some(l=>!l.swiped)||T.value.length===0&&o.value.every(l=>l.swiped))&&p("allSwiped")},F=()=>{const l=document.querySelector(".tinder--card");if(l){const n=new Ui(l);n.on("pan",h=>O(h,l)),n.on("panend",h=>J(h,l))}},Q=l=>{var _;if(P.value||T.value.length===0)return;const n=document.querySelector(".tinder--card"),h=(_=T.value[0])==null?void 0:_.id;if(!n||!h)return;const m=l?1:-1;E.value=m,P.value=!0;const w=n.querySelector(".swipe-left"),$=n.querySelector(".swipe-right");w&&(w.style.opacity=m===-1?1:0),$&&($.style.opacity=m===1?1:0),ge.replace(),n.style.transition="transform 0.4s ease-out, opacity 0.4s ease-out",n.style.transform=`translateX(${m*100}%) rotate(${m*30}deg)`,n.style.opacity=0,setTimeout(()=>{const q=o.value.find(N=>N.id===h);o.value=o.value.map(N=>N.id===h?{...N,swiped:!0}:N),q&&p(l?"swipeRight":"swipeLeft",q),C.value++,v(),De(()=>H(n))},400)},y=l=>{l.key==="ArrowLeft"?(l.preventDefault(),Q(!1)):l.key==="ArrowRight"&&(l.preventDefault(),Q(!0))};return $e(()=>{o.value=g.things.value.map(l=>({...l,swiped:!1})),v(),De(F),window.addEventListener("keydown",y)}),We(()=>{window.removeEventListener("keydown",y)}),vt(T,()=>{De(F)}),vt(()=>g.things,l=>{o.value=l.map(n=>({...n,swiped:!1})),C.value=0,v()}),(l,n)=>(D(),k("div",{ref_key:"tinderContainer",ref:V,class:"tinder-container"},[f("div",ki,[(D(!0),k(ve,null,me(T.value,(h,m)=>(D(),k("div",{key:h.id,class:"tinder--card",style:ci(R.value(m))},[n[0]||(n[0]=f("div",{class:"swipe-overlay swipe-left"},[f("i",{"data-feather":"thumbs-down",class:"like"})],-1)),n[1]||(n[1]=f("div",{class:"swipe-overlay swipe-right"},[f("i",{"data-feather":"thumbs-up",class:"like"})],-1)),f("img",{src:h.imagesUrl,alt:"Card image",class:"card-image",onError:L},null,40,Hi),f("div",Fi,[f("h3",Xi,b(h.name),1),f("div",Vi,[f("span",qi,"~$"+b(h.price),1),f("span",zi,b(h.condition.name),1)]),f("p",xi,b(h.description),1)])],4))),128))])],512))}},Wi=yt($i,[["__scopeId","data-v-cb3c79d2"]]),Gi={style:{overflow:"hidden !important"}},Bi={key:1,class:"noSwaps"},Ki={__name:"swaps",setup(c){const{t:u,locale:L}=ui(),g=Et();We(()=>{g.commit("setLoading",!0),y()});const p=S(""),V=S(""),o=S(!1),T=mt([]),C=new hi;$e(async()=>{g.commit("setLoading",!0),ge.replace();const n=g.getters.getCachedSwipes;n&&n.length>0?(T.value=n,R.value=!0,g.commit("setLoading",!1)):await C.getFilteredThings().then(h=>{T.value=h,g.commit("setCachedSwipes",h),R.value=!0,h==null&&l(),g.commit("setLoading",!1)}),g.commit("setLoading",!1)});const E=wt(()=>T.value.length===0),P=mt({en:[{title:"ðŸŽ‰ Match Found!",message:"You've found a swap partner! Ready to exchange your items? Let's make this happen!"},{title:"ðŸ¤ Itâ€™s a Match!",message:"Great news! You both want to swap. Tap below to chat and finalize the exchange!"},{title:"ðŸ¥³ Swap Time!",message:"You matched! Letâ€™s get this swap rollingâ€”hit the button to connect!"},{title:"ðŸš€ Match Alert!",message:"Youâ€™ve got a match! Donâ€™t miss outâ€”click below to start your swap journey!"},{title:"ðŸŽŠ Itâ€™s a Match!",message:"You and your match are ready to swap! Message them to arrange the details!"},{title:"ðŸ’¥ Exciting Match!",message:"You found someone to swap with! Letâ€™s make this exchange happen!"},{title:"âœ¨ Match Made!",message:"Congratulations! Youâ€™ve found a great swap partner. Time to chat!"},{title:"ðŸŽˆ You Matched!",message:"Awesome! You matched with someone interested in swapping. Connect now!"},{title:"ðŸŒŸ Swap Partner Found!",message:"Youâ€™ve found a swap partner! Ready to chat and arrange the exchange?"},{title:"ðŸŽ¶ Itâ€™s a Perfect Match!",message:"What a coincidence! You both want to swap. Letâ€™s get started!"},{title:"ðŸ”” Match Notification!",message:"You matched with someone looking to swap. Donâ€™t waitâ€”message them now!"},{title:"ðŸ† Match Success!",message:"Great job! You have a match. Time to coordinate your swap!"},{title:"ðŸ’– Itâ€™s a Great Match!",message:"Youâ€™ve matched with a fellow swapper! Letâ€™s talk details!"},{title:"ðŸ’« You Matched Up!",message:"Fantastic! You found a swap partner. Click below to start chatting!"},{title:"ðŸ”¥ Hot Match!",message:"Youâ€™ve got a match! Time to connect and finalize your swap!"},{title:"ðŸ“¦ Swap Partner Alert!",message:"You matched with someone ready to swap. Reach out to them now!"},{title:"ðŸš¦ Match Confirmed!",message:"Youâ€™ve found a swap partner! Ready to exchange details?"},{title:"ðŸ’¡ Match Found!",message:"Great news! You have a match. Start chatting to arrange the swap!"},{title:"ðŸ€ Lucky Match!",message:"You matched with someone who wants to swap. Donâ€™t miss your chance!"},{title:"ðŸ”— Connection Established!",message:"Youâ€™ve got a match! Letâ€™s connect and make that swap happen!"},{title:"ðŸ¥‡ Itâ€™s a Winner!",message:"You found a swap partner! Ready to start your exchange journey?"}],es:[{title:"ðŸŽ‰ Â¡Intercambio Encontrado!",message:"Â¡Has encontrado un compaÃ±ero para intercambiar! Â¿Listo para hacer el cambio? Â¡HagÃ¡moslo realidad!"},{title:"ðŸ¤ Â¡Es un Match!",message:"Â¡Buenas noticias! Ambos quieren intercambiar. Â¡Toca abajo para chatear y cerrar el trato!"},{title:"ðŸ¥³ Â¡Hora de Intercambiar!",message:"Â¡Tienes un match! Vamos a empezar el intercambioâ€”Â¡haz clic para conectar!"},{title:"ðŸš€ Â¡Alerta de Match!",message:"Â¡Tienes un match! No lo dejes pasarâ€”haz clic abajo para comenzar tu intercambio."},{title:"ðŸŽŠ Â¡Es un Match!",message:"Â¡TÃº y tu compaÃ±ero estÃ¡n listos para intercambiar! EscrÃ­bele para coordinar los detalles."},{title:"ðŸ’¥ Â¡Match Emocionante!",message:"Â¡Encontraste a alguien para intercambiar! Â¡Hagamos este intercambio realidad!"},{title:"âœ¨ Â¡Match Perfecto!",message:"Â¡Felicidades! Has encontrado un gran compaÃ±ero de intercambio. Â¡Hora de chatear!"},{title:"ðŸŽˆ Â¡Tienes un Match!",message:"Â¡Genial! Hiciste match con alguien interesado en intercambiar. Â¡Conecta ahora!"},{title:"ðŸŒŸ Â¡CompaÃ±ero de Intercambio Encontrado!",message:"Â¡Has encontrado un compaÃ±ero para intercambiar! Â¿Listo para chatear y organizar el intercambio?"},{title:"ðŸŽ¶ Â¡Es un Match Perfecto!",message:"Â¡QuÃ© coincidencia! Ambos quieren intercambiar. Â¡Empecemos!"},{title:"ðŸ”” Â¡NotificaciÃ³n de Match!",message:"Has hecho match con alguien interesado en intercambiar. Â¡No esperesâ€”envÃ­ale un mensaje ahora!"},{title:"ðŸ† Â¡Match Exitoso!",message:"Â¡Buen trabajo! Tienes un match. Â¡Hora de coordinar el intercambio!"},{title:"ðŸ’– Â¡Gran Match!",message:"Â¡Has hecho match con otro intercambiador! Â¡Hablemos de los detalles!"},{title:"ðŸ’« Â¡Tienes un Match!",message:"Â¡FantÃ¡stico! Has encontrado un compaÃ±ero de intercambio. Â¡Haz clic abajo para empezar a chatear!"},{title:"ðŸ”¥ Â¡Match Caliente!",message:"Â¡Tienes un match! Â¡Es hora de conectar y cerrar el intercambio!"},{title:"ðŸ“¦ Â¡Alerta de Intercambio!",message:"Hiciste match con alguien listo para intercambiar. Â¡ContÃ¡ctalo ahora!"},{title:"ðŸš¦ Â¡Match Confirmado!",message:"Â¡Has encontrado un compaÃ±ero de intercambio! Â¿Listo para intercambiar detalles?"},{title:"ðŸ’¡ Â¡Match Encontrado!",message:"Â¡Buenas noticias! Tienes un match. Â¡Empieza a chatear para organizar el intercambio!"},{title:"ðŸ€ Â¡Match Afortunado!",message:"Hiciste match con alguien que quiere intercambiar. Â¡No pierdas tu oportunidad!"},{title:"ðŸ”— Â¡ConexiÃ³n Establecida!",message:"Â¡Tienes un match! Â¡Conectemos y hagamos que el intercambio suceda!"},{title:"ðŸ¥‡ Â¡Es un Ganador!",message:"Â¡Encontraste un compaÃ±ero de intercambio! Â¿Listo para comenzar tu experiencia?"}]}),R=S(!1),H=()=>{R.value=!1},O=S(!1),J=n=>{O.value=!0,R.value=!1,C.getFilteredThings({range:n.range,category_id:n.category,condition_id:n.condition,material_id:n.material,color_id:n.color,weight:[0,n.weight],price:[0,n.price],search:n.searchTerm}).then(h=>{T.value=h,g.commit("setCachedSwipes",T.value),R.value=!0,O.value=!1,h==null&&l()})},v=S([]),F=n=>{v.value.push({thing_id:n.id,user_id:n.user_id,liked:!0,matched:n.liked}),v.value.length==10&&y(),n.liked&&ri.fire({title:P[L.value][Math.floor(Math.random()*P[L.value].length)].title,text:P[L.value][Math.floor(Math.random()*P[L.value].length)].message,icon:"success",iconHtml:'<i data-feather="shuffle" class="custom-icon"></i>',timer:2800,timerProgressBar:!0,showConfirmButton:!1,backdrop:!0,customClass:{popup:"custom-modal",icon:"custom-icon-wrapper"},willOpen:()=>{ge.replace()}})},Q=n=>{v.value.push({thing_id:n.id,user_id:n.user_id,liked:!1,matched:!1}),v.value.length==10&&y()},y=async()=>{if(v.value.length===0)return;const n=[...v.value],h=n.map(w=>w.thing_id),m=T.value.filter(w=>!h.includes(w.id));try{v.value=[],g.commit("setCachedSwipes",m);const w=await C.loadSwipes({swipes:n});w.success&&g.commit("addMatches",w.new_chats)}catch(w){console.error("Failed to send swipes:",w)}},l=()=>{p.value="info",V.value=u("Try Searching for Something Else"),o.value=!0,setTimeout(()=>{o.value=!1},2800),T.value.length=0,g.commit("setCachedSwipes",[]),y()};return(n,h)=>(D(),k("div",Gi,[O.value?(D(),gt(di,{key:0})):Le("",!0),Tt(ai,{type:p.value,text:V.value,launch:o.value},null,8,["type","text","launch"]),Tt(Li,{onSearchThingsEmit:J,onShowFiltersEmit:h[0]||(h[0]=m=>H())}),R.value&&E.value?(D(),k("h2",Bi,b(n.$t("Looks like you've seen everything! Try searching for something new or expanding your range to discover more.")),1)):Le("",!0),R.value?(D(),gt(Wi,{key:2,things:T,onSwipeRight:F,onSwipeLeft:Q,onAllSwiped:l},null,8,["things"])):Le("",!0)]))}};export{Ki as default};
