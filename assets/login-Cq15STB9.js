import{_ as T,b as L,r as i,d as C,c as $,a as t,t as o,w as I,e as p,v as g,f as E,g as _,h as D,i as R,o as V,u as M,S as P}from"./index-De9TGtBS.js";import{s as q}from"./successErrorCard-B18wESi_.js";import"./feather-DLCu0CSh.js";const U={class:"landing-page"},x={class:"container"},B={class:"title"},N={class:"input-group"},A=["placeholder"],F={class:"input-group"},j=["placeholder"],z={class:"terms-container"},G={class:"terms-checkbox"},H={class:"terms-text"},J={href:"https://www.trueque.art/#/privacy",target:"_blank"},K=["disabled"],O={__name:"login",setup(Q){const{t:h,locale:w}=L(),s=R(),f=new P,n=M(),v=i("error"),c=i("The provided credentials are incorrect"),a=i(!1),d=i(""),m=i(""),u=i(!1);C(()=>{s.commit("setLoading",!1)});const b=()=>{n.push({name:"register"})},k=()=>{n.push({name:"emailPasswordReset"})},y=()=>{u.value&&(s.commit("setLoading",!0),f.login({email:d.value,password:m.value}).then(e=>{"token"in e?(s.dispatch("setAuthData",{token:e.token,userId:e.user_id}),localStorage.setItem("access_token",e.token),localStorage.setItem("user_id",e.user_id),s.dispatch("initEcho"),w.value=e.language,s.commit("setCachedSwipes",e.things),s.commit("setUserDetails",e.userDetails),s.commit("setMatches",e.userChats),n.push({name:"swaps"})):"verify"in e?(v.value="info",c.value=h(e.message),a.value=!0,setTimeout(()=>{a.value=!1},2800),n.push({name:"verifyEmail"})):(a.value=!0,setTimeout(()=>{a.value=!1},2800))}).catch(e=>{c.value=h("Email or password are incorrect."),a.value=!0,setTimeout(()=>{a.value=!1},2800)}).finally(()=>{s.commit("setLoading",!1)}))},S=()=>{window.open("https://www.trueque.art/#/how-it-works","_blank")};return(e,l)=>(V(),$("div",U,[t("div",x,[t("div",{class:"cont_logo",onClick:S}),t("h1",B,o(e.$t("Log In")),1),t("form",{onSubmit:I(y,["prevent"]),class:"form"},[t("div",N,[p(t("input",{type:"email",id:"email","onUpdate:modelValue":l[0]||(l[0]=r=>d.value=r),required:"",class:"inputLogin",placeholder:e.$t("E-mail")},null,8,A),[[g,d.value]])]),t("div",F,[p(t("input",{type:"password",id:"password","onUpdate:modelValue":l[1]||(l[1]=r=>m.value=r),required:"",class:"inputLogin",placeholder:e.$t("Password")},null,8,j),[[g,m.value]]),t("p",{class:"forgot",onClick:k},o(e.$t("Forgot your password?")),1)]),t("div",z,[t("label",G,[p(t("input",{type:"checkbox",id:"terms","onUpdate:modelValue":l[2]||(l[2]=r=>u.value=r)},null,512),[[E,u.value]]),t("span",H,[_(o(e.$t("I agree to the"))+" ",1),t("a",J,o(e.$t("Terms of Service and Privacy Policy")),1)])])]),t("button",{type:"submit",class:"submit-button",disabled:!u.value},o(e.$t("Log In")),9,K),t("p",{class:"createLabel",onClick:b},[_(o(e.$t("Don't have an account?"))+" ",1),t("strong",null,o(e.$t("Create one")),1)])],32),D(q,{type:v.value,text:c.value,launch:a.value},null,8,["type","text","launch"])])]))}},Z=T(O,[["__scopeId","data-v-61deaa2b"]]);export{Z as default};
