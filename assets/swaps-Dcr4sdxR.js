import{s as si,S as ai}from"./successErrorCard-CsDnWBLS.js";import{_ as Tt,E as ri,o as D,c as k,a as f,e as ie,v as Oe,G as ni,t as O,m as be,F as ve,k as me,l as ze,i as yt,r as P,d as We,D as Ge,H as oi,q as Et,I as De,J as vt,K as li,b as ci,C as mt,h as gt,A as ui,S as hi}from"./index-VZJWoiHj.js";import{f as ge}from"./feather-DGZv_OKY.js";const di=ri({name:"searchelement",emits:["searchThingsEmit","showFiltersEmit"],setup(l,{emit:u}){const L=yt(),p=P({searchTerm:"",price:"",condition:"",weight:"",category:"",material:"",color:"",range:""}),g=P(null),V=P(!1),o=P([]),C=P([]),T=P([]),E=P([]),b=P(!1),q=H=>p.value.category.includes(H),w=(H,Q)=>{if(Q)p.value.category.push(H);else{const y=p.value.category.indexOf(H);y>-1&&p.value.category.splice(y,1)}},R=()=>{V.value=!1,u("searchThingsEmit",p.value),p.value={searchTerm:"",price:"",condition:"",weight:"",category:"",range:"",material:"",color:""}},J=()=>{V.value=!0,u("showFiltersEmit")},v=H=>{g.value&&!g.value.contains(H.target)&&(b.value=!1)};return We(async()=>{document.addEventListener("click",v),o.value=L.getters.getConditions,C.value=L.getters.getCategories,T.value=L.getters.getMaterials,E.value=L.getters.getColors}),Ge(()=>{document.removeEventListener("click",v)}),{filters:p,conditions:o,categories:C,materials:T,colors:E,showCategories:b,isChecked:q,updateCategories:w,searchThings:R,handleClickOutside:v,dropdown:g,showFilters:V,showFiltersMethod:J}}}),fi={class:"search-filter-container"},pi={class:"input-group"},vi=["placeholder"],mi={key:0,class:"filter-options-container"},gi={class:"filter-card"},Ti=["placeholder"],yi={class:"filter-card"},Ei=["placeholder"],wi={value:"",disabled:"",selected:""},Ii=["value"],_i={class:"filter-card"},Si=["placeholder"],Ci={value:"",disabled:"",selected:""},Pi=["value"],Ni={value:"",disabled:"",selected:""},Ai=["value"],Mi={value:"",disabled:"",selected:""},Oi=["value"];function bi(l,u,L,p,g,V){return D(),k("div",fi,[f("div",pi,[ie(f("input",{"onUpdate:modelValue":u[0]||(u[0]=o=>l.filters.searchTerm=o),type:"text",placeholder:l.$t("Search..."),class:"inputLogin",onClick:u[1]||(u[1]=(...o)=>l.showFiltersMethod&&l.showFiltersMethod(...o)),onKeypress:u[2]||(u[2]=ni((...o)=>l.searchThings&&l.searchThings(...o),["enter"]))},null,40,vi),[[Oe,l.filters.searchTerm]]),f("button",{onClick:u[3]||(u[3]=(...o)=>l.searchThings&&l.searchThings(...o)),class:"submit-button"},[f("span",null,O(l.$t("Search")),1)])]),l.showFilters?(D(),k("div",mi,[f("div",gi,[f("span",null,O(l.$t("$")),1),ie(f("input",{type:"text",inputmode:"decimal",pattern:"[0-9]*","onUpdate:modelValue":u[4]||(u[4]=o=>l.filters.price=o),placeholder:l.$t("Max Price"),class:"filter-input",onInput:u[5]||(u[5]=o=>l.filters.price=l.filters.price.replace(/[^0-9]/g,""))},null,40,Ti),[[Oe,l.filters.price]])]),f("div",yi,[ie(f("input",{type:"text",inputmode:"decimal",pattern:"[0-9]*","onUpdate:modelValue":u[6]||(u[6]=o=>l.filters.rang=o),placeholder:l.$t("Range"),class:"filter-input",onInput:u[7]||(u[7]=o=>l.filters.rang=l.filters.rang.replace(/[^0-9]/g,""))},null,40,Ei),[[Oe,l.filters.rang]]),f("span",null,O(l.$t("Km")),1)]),ie(f("select",{"onUpdate:modelValue":u[8]||(u[8]=o=>l.filters.condition=o),class:"filter-card select-filter"},[f("option",wi,O(l.$t("Condition")),1),(D(!0),k(ve,null,me(l.conditions,o=>(D(),k("option",{key:o.id,value:o.id},O(l.$t(o.name)),9,Ii))),128))],512),[[be,l.filters.condition]]),f("div",_i,[ie(f("input",{type:"text",inputmode:"decimal",pattern:"[0-9]*","onUpdate:modelValue":u[9]||(u[9]=o=>l.filters.weight=o),placeholder:l.$t("Max Weight"),class:"filter-input",onInput:u[10]||(u[10]=o=>l.filters.weight=l.filters.weight.replace(/[^0-9]/g,""))},null,40,Si),[[Oe,l.filters.weight]]),f("span",null,O(l.$t("Kg")),1)]),ie(f("select",{"onUpdate:modelValue":u[11]||(u[11]=o=>l.filters.category=o),class:"filter-card select-filter"},[f("option",Ci,O(l.$t("Category")),1),(D(!0),k(ve,null,me(l.categories,o=>(D(),k("option",{key:o.id,value:o.id},O(l.$t(o.name)),9,Pi))),128))],512),[[be,l.filters.category]]),ie(f("select",{"onUpdate:modelValue":u[12]||(u[12]=o=>l.filters.material=o),class:"filter-card select-filter"},[f("option",Ni,O(l.$t("Material")),1),(D(!0),k(ve,null,me(l.materials,o=>(D(),k("option",{key:o.id,value:o.id},O(l.$t(o.name)),9,Ai))),128))],512),[[be,l.filters.material]]),ie(f("select",{"onUpdate:modelValue":u[13]||(u[13]=o=>l.filters.color=o),class:"filter-card select-filter"},[f("option",Mi,O(l.$t("Color")),1),(D(!0),k(ve,null,me(l.colors,o=>(D(),k("option",{key:o.id,value:o.id},O(l.$t(o.name)),9,Oi))),128))],512),[[be,l.filters.color]])])):ze("",!0)])}const Di=Tt(di,[["render",bi],["__scopeId","data-v-db475e5f"]]);var wt={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(l){(function(u,L,p,g){var V=["","webkit","Moz","MS","ms","o"],o=L.createElement("div"),C="function",T=Math.round,E=Math.abs,b=Date.now;function q(e,t,i){return setTimeout(c(e,i),t)}function w(e,t,i){return Array.isArray(e)?(R(e,i[t],i),!0):!1}function R(e,t,i){var s;if(e)if(e.forEach)e.forEach(t,i);else if(e.length!==g)for(s=0;s<e.length;)t.call(i,e[s],s,e),s++;else for(s in e)e.hasOwnProperty(s)&&t.call(i,e[s],s,e)}function J(e,t,i){var s="DEPRECATED METHOD: "+t+`
`+i+` AT 
`;return function(){var a=new Error("get-stack-trace"),r=a&&a.stack?a.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",d=u.console&&(u.console.warn||u.console.log);return d&&d.call(u.console,s,r),e.apply(this,arguments)}}var v;typeof Object.assign!="function"?v=function(t){if(t===g||t===null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),s=1;s<arguments.length;s++){var a=arguments[s];if(a!==g&&a!==null)for(var r in a)a.hasOwnProperty(r)&&(i[r]=a[r])}return i}:v=Object.assign;var H=J(function(t,i,s){for(var a=Object.keys(i),r=0;r<a.length;)(!s||s&&t[a[r]]===g)&&(t[a[r]]=i[a[r]]),r++;return t},"extend","Use `assign`."),Q=J(function(t,i){return H(t,i,!0)},"merge","Use `assign`.");function y(e,t,i){var s=t.prototype,a;a=e.prototype=Object.create(s),a.constructor=e,a._super=s,i&&v(a,i)}function c(e,t){return function(){return e.apply(t,arguments)}}function n(e,t){return typeof e==C?e.apply(t&&t[0]||g,t):e}function h(e,t){return e===g?t:e}function m(e,t,i){R(X(t),function(s){e.addEventListener(s,i,!1)})}function I(e,t,i){R(X(t),function(s){e.removeEventListener(s,i,!1)})}function W(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function _(e,t){return e.indexOf(t)>-1}function X(e){return e.trim().split(/\s+/g)}function N(e,t,i){if(e.indexOf&&!i)return e.indexOf(t);for(var s=0;s<e.length;){if(i&&e[s][i]==t||!i&&e[s]===t)return s;s++}return-1}function Te(e){return Array.prototype.slice.call(e,0)}function xe(e,t,i){for(var s=[],a=[],r=0;r<e.length;){var d=e[r][t];N(a,d)<0&&s.push(e[r]),a[r]=d,r++}return s=s.sort(function(M,Y){return M[t]>Y[t]}),s}function ye(e,t){for(var i,s,a=t[0].toUpperCase()+t.slice(1),r=0;r<V.length;){if(i=V[r],s=i?i+a:t,s in e)return s;r++}return g}var It=1;function _t(){return It++}function Be(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||u}var St=/mobile|tablet|ip(ad|hone|od)|android/i,Ze="ontouchstart"in u,Ct=ye(u,"PointerEvent")!==g,Pt=Ze&&St.test(navigator.userAgent),oe="touch",Nt="pen",Le="mouse",At="kinect",Mt=25,U=1,se=2,S=4,F=8,Ee=1,le=2,ce=4,ue=8,he=16,x=le|ce,ae=ue|he,Ke=x|ae,je=["x","y"],we=["clientX","clientY"];function $(e,t){var i=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(s){n(e.options.enable,[e])&&i.handler(s)},this.init()}$.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(Be(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&I(this.element,this.evEl,this.domHandler),this.evTarget&&I(this.target,this.evTarget,this.domHandler),this.evWin&&I(Be(this.element),this.evWin,this.domHandler)}};function Ot(e){var t,i=e.options.inputClass;return i?t=i:Ct?t=Ue:Pt?t=Se:Ze?t=Ye:t=_e,new t(e,bt)}function bt(e,t,i){var s=i.pointers.length,a=i.changedPointers.length,r=t&U&&s-a===0,d=t&(S|F)&&s-a===0;i.isFirst=!!r,i.isFinal=!!d,r&&(e.session={}),i.eventType=t,Dt(e,i),e.emit("hammer.input",i),e.recognize(i),e.session.prevInput=i}function Dt(e,t){var i=e.session,s=t.pointers,a=s.length;i.firstInput||(i.firstInput=Je(t)),a>1&&!i.firstMultiple?i.firstMultiple=Je(t):a===1&&(i.firstMultiple=!1);var r=i.firstInput,d=i.firstMultiple,A=d?d.center:r.center,M=t.center=Qe(s);t.timeStamp=b(),t.deltaTime=t.timeStamp-r.timeStamp,t.angle=Re(A,M),t.distance=Ie(A,M),Lt(i,t),t.offsetDirection=tt(t.deltaX,t.deltaY);var Y=et(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=Y.x,t.overallVelocityY=Y.y,t.overallVelocity=E(Y.x)>E(Y.y)?Y.x:Y.y,t.scale=d?Yt(d.pointers,s):1,t.rotation=d?Ut(d.pointers,s):0,t.maxPointers=i.prevInput?t.pointers.length>i.prevInput.maxPointers?t.pointers.length:i.prevInput.maxPointers:t.pointers.length,Rt(i,t);var Z=e.element;W(t.srcEvent.target,Z)&&(Z=t.srcEvent.target),t.target=Z}function Lt(e,t){var i=t.center,s=e.offsetDelta||{},a=e.prevDelta||{},r=e.prevInput||{};(t.eventType===U||r.eventType===S)&&(a=e.prevDelta={x:r.deltaX||0,y:r.deltaY||0},s=e.offsetDelta={x:i.x,y:i.y}),t.deltaX=a.x+(i.x-s.x),t.deltaY=a.y+(i.y-s.y)}function Rt(e,t){var i=e.lastInterval||t,s=t.timeStamp-i.timeStamp,a,r,d,A;if(t.eventType!=F&&(s>Mt||i.velocity===g)){var M=t.deltaX-i.deltaX,Y=t.deltaY-i.deltaY,Z=et(s,M,Y);r=Z.x,d=Z.y,a=E(Z.x)>E(Z.y)?Z.x:Z.y,A=tt(M,Y),e.lastInterval=t}else a=i.velocity,r=i.velocityX,d=i.velocityY,A=i.direction;t.velocity=a,t.velocityX=r,t.velocityY=d,t.direction=A}function Je(e){for(var t=[],i=0;i<e.pointers.length;)t[i]={clientX:T(e.pointers[i].clientX),clientY:T(e.pointers[i].clientY)},i++;return{timeStamp:b(),pointers:t,center:Qe(t),deltaX:e.deltaX,deltaY:e.deltaY}}function Qe(e){var t=e.length;if(t===1)return{x:T(e[0].clientX),y:T(e[0].clientY)};for(var i=0,s=0,a=0;a<t;)i+=e[a].clientX,s+=e[a].clientY,a++;return{x:T(i/t),y:T(s/t)}}function et(e,t,i){return{x:t/e||0,y:i/e||0}}function tt(e,t){return e===t?Ee:E(e)>=E(t)?e<0?le:ce:t<0?ue:he}function Ie(e,t,i){i||(i=je);var s=t[i[0]]-e[i[0]],a=t[i[1]]-e[i[1]];return Math.sqrt(s*s+a*a)}function Re(e,t,i){i||(i=je);var s=t[i[0]]-e[i[0]],a=t[i[1]]-e[i[1]];return Math.atan2(a,s)*180/Math.PI}function Ut(e,t){return Re(t[1],t[0],we)+Re(e[1],e[0],we)}function Yt(e,t){return Ie(t[0],t[1],we)/Ie(e[0],e[1],we)}var kt={mousedown:U,mousemove:se,mouseup:S},Ht="mousedown",Ft="mousemove mouseup";function _e(){this.evEl=Ht,this.evWin=Ft,this.pressed=!1,$.apply(this,arguments)}y(_e,$,{handler:function(t){var i=kt[t.type];i&U&&t.button===0&&(this.pressed=!0),i&se&&t.which!==1&&(i=S),this.pressed&&(i&S&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[t],changedPointers:[t],pointerType:Le,srcEvent:t}))}});var Vt={pointerdown:U,pointermove:se,pointerup:S,pointercancel:F,pointerout:F},Xt={2:oe,3:Nt,4:Le,5:At},it="pointerdown",st="pointermove pointerup pointercancel";u.MSPointerEvent&&!u.PointerEvent&&(it="MSPointerDown",st="MSPointerMove MSPointerUp MSPointerCancel");function Ue(){this.evEl=it,this.evWin=st,$.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}y(Ue,$,{handler:function(t){var i=this.store,s=!1,a=t.type.toLowerCase().replace("ms",""),r=Vt[a],d=Xt[t.pointerType]||t.pointerType,A=d==oe,M=N(i,t.pointerId,"pointerId");r&U&&(t.button===0||A)?M<0&&(i.push(t),M=i.length-1):r&(S|F)&&(s=!0),!(M<0)&&(i[M]=t,this.callback(this.manager,r,{pointers:i,changedPointers:[t],pointerType:d,srcEvent:t}),s&&i.splice(M,1))}});var qt={touchstart:U,touchmove:se,touchend:S,touchcancel:F},$t="touchstart",zt="touchstart touchmove touchend touchcancel";function at(){this.evTarget=$t,this.evWin=zt,this.started=!1,$.apply(this,arguments)}y(at,$,{handler:function(t){var i=qt[t.type];if(i===U&&(this.started=!0),!!this.started){var s=Wt.call(this,t,i);i&(S|F)&&s[0].length-s[1].length===0&&(this.started=!1),this.callback(this.manager,i,{pointers:s[0],changedPointers:s[1],pointerType:oe,srcEvent:t})}}});function Wt(e,t){var i=Te(e.touches),s=Te(e.changedTouches);return t&(S|F)&&(i=xe(i.concat(s),"identifier")),[i,s]}var Gt={touchstart:U,touchmove:se,touchend:S,touchcancel:F},xt="touchstart touchmove touchend touchcancel";function Se(){this.evTarget=xt,this.targetIds={},$.apply(this,arguments)}y(Se,$,{handler:function(t){var i=Gt[t.type],s=Bt.call(this,t,i);s&&this.callback(this.manager,i,{pointers:s[0],changedPointers:s[1],pointerType:oe,srcEvent:t})}});function Bt(e,t){var i=Te(e.touches),s=this.targetIds;if(t&(U|se)&&i.length===1)return s[i[0].identifier]=!0,[i,i];var a,r,d=Te(e.changedTouches),A=[],M=this.target;if(r=i.filter(function(Y){return W(Y.target,M)}),t===U)for(a=0;a<r.length;)s[r[a].identifier]=!0,a++;for(a=0;a<d.length;)s[d[a].identifier]&&A.push(d[a]),t&(S|F)&&delete s[d[a].identifier],a++;if(A.length)return[xe(r.concat(A),"identifier"),A]}var Zt=2500,rt=25;function Ye(){$.apply(this,arguments);var e=c(this.handler,this);this.touch=new Se(this.manager,e),this.mouse=new _e(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}y(Ye,$,{handler:function(t,i,s){var a=s.pointerType==oe,r=s.pointerType==Le;if(!(r&&s.sourceCapabilities&&s.sourceCapabilities.firesTouchEvents)){if(a)Kt.call(this,i,s);else if(r&&jt.call(this,s))return;this.callback(t,i,s)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Kt(e,t){e&U?(this.primaryTouch=t.changedPointers[0].identifier,nt.call(this,t)):e&(S|F)&&nt.call(this,t)}function nt(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY};this.lastTouches.push(i);var s=this.lastTouches,a=function(){var r=s.indexOf(i);r>-1&&s.splice(r,1)};setTimeout(a,Zt)}}function jt(e){for(var t=e.srcEvent.clientX,i=e.srcEvent.clientY,s=0;s<this.lastTouches.length;s++){var a=this.lastTouches[s],r=Math.abs(t-a.x),d=Math.abs(i-a.y);if(r<=rt&&d<=rt)return!0}return!1}var ot=ye(o.style,"touchAction"),lt=ot!==g,ct="compute",ut="auto",ke="manipulation",re="none",de="pan-x",fe="pan-y",Ce=Qt();function He(e,t){this.manager=e,this.set(t)}He.prototype={set:function(e){e==ct&&(e=this.compute()),lt&&this.manager.element.style&&Ce[e]&&(this.manager.element.style[ot]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return R(this.manager.recognizers,function(t){n(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Jt(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,i=e.offsetDirection;if(this.manager.session.prevented){t.preventDefault();return}var s=this.actions,a=_(s,re)&&!Ce[re],r=_(s,fe)&&!Ce[fe],d=_(s,de)&&!Ce[de];if(a){var A=e.pointers.length===1,M=e.distance<2,Y=e.deltaTime<250;if(A&&M&&Y)return}if(!(d&&r)&&(a||r&&i&x||d&&i&ae))return this.preventSrc(t)},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};function Jt(e){if(_(e,re))return re;var t=_(e,de),i=_(e,fe);return t&&i?re:t||i?t?de:fe:_(e,ke)?ke:ut}function Qt(){if(!lt)return!1;var e={},t=u.CSS&&u.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){e[i]=t?u.CSS.supports("touch-action",i):!0}),e}var Pe=1,z=2,ne=4,ee=8,K=ee,pe=16,B=32;function j(e){this.options=v({},this.defaults,e||{}),this.id=_t(),this.manager=null,this.options.enable=h(this.options.enable,!0),this.state=Pe,this.simultaneous={},this.requireFail=[]}j.prototype={defaults:{},set:function(e){return v(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(w(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=Ne(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return w(e,"dropRecognizeWith",this)?this:(e=Ne(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(w(e,"requireFailure",this))return this;var t=this.requireFail;return e=Ne(e,this),N(t,e)===-1&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(w(e,"dropRequireFailure",this))return this;e=Ne(e,this);var t=N(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,i=this.state;function s(a){t.manager.emit(a,e)}i<ee&&s(t.options.event+ht(i)),s(t.options.event),e.additionalEvent&&s(e.additionalEvent),i>=ee&&s(t.options.event+ht(i))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=B},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(B|Pe)))return!1;e++}return!0},recognize:function(e){var t=v({},e);if(!n(this.options.enable,[this,t])){this.reset(),this.state=B;return}this.state&(K|pe|B)&&(this.state=Pe),this.state=this.process(t),this.state&(z|ne|ee|pe)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}};function ht(e){return e&pe?"cancel":e&ee?"end":e&ne?"move":e&z?"start":""}function dt(e){return e==he?"down":e==ue?"up":e==le?"left":e==ce?"right":""}function Ne(e,t){var i=t.manager;return i?i.get(e):e}function G(){j.apply(this,arguments)}y(G,j,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return t===0||e.pointers.length===t},process:function(e){var t=this.state,i=e.eventType,s=t&(z|ne),a=this.attrTest(e);return s&&(i&F||!a)?t|pe:s||a?i&S?t|ee:t&z?t|ne:z:B}});function Ae(){G.apply(this,arguments),this.pX=null,this.pY=null}y(Ae,G,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ke},getTouchAction:function(){var e=this.options.direction,t=[];return e&x&&t.push(fe),e&ae&&t.push(de),t},directionTest:function(e){var t=this.options,i=!0,s=e.distance,a=e.direction,r=e.deltaX,d=e.deltaY;return a&t.direction||(t.direction&x?(a=r===0?Ee:r<0?le:ce,i=r!=this.pX,s=Math.abs(e.deltaX)):(a=d===0?Ee:d<0?ue:he,i=d!=this.pY,s=Math.abs(e.deltaY))),e.direction=a,i&&s>t.threshold&&a&t.direction},attrTest:function(e){return G.prototype.attrTest.call(this,e)&&(this.state&z||!(this.state&z)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=dt(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}});function Fe(){G.apply(this,arguments)}y(Fe,G,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[re]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&z)},emit:function(e){if(e.scale!==1){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}});function Ve(){j.apply(this,arguments),this._timer=null,this._input=null}y(Ve,j,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ut]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,s=e.distance<t.threshold,a=e.deltaTime>t.time;if(this._input=e,!s||!i||e.eventType&(S|F)&&!a)this.reset();else if(e.eventType&U)this.reset(),this._timer=q(function(){this.state=K,this.tryEmit()},t.time,this);else if(e.eventType&S)return K;return B},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===K&&(e&&e.eventType&S?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=b(),this.manager.emit(this.options.event,this._input)))}});function Xe(){G.apply(this,arguments)}y(Xe,G,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[re]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&z)}});function qe(){G.apply(this,arguments)}y(qe,G,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:x|ae,pointers:1},getTouchAction:function(){return Ae.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction,i;return t&(x|ae)?i=e.overallVelocity:t&x?i=e.overallVelocityX:t&ae&&(i=e.overallVelocityY),this._super.attrTest.call(this,e)&&t&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&E(i)>this.options.velocity&&e.eventType&S},emit:function(e){var t=dt(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}});function Me(){j.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}y(Me,j,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ke]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,s=e.distance<t.threshold,a=e.deltaTime<t.time;if(this.reset(),e.eventType&U&&this.count===0)return this.failTimeout();if(s&&a&&i){if(e.eventType!=S)return this.failTimeout();var r=this.pTime?e.timeStamp-this.pTime<t.interval:!0,d=!this.pCenter||Ie(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,!d||!r?this.count=1:this.count+=1,this._input=e;var A=this.count%t.taps;if(A===0)return this.hasRequireFailures()?(this._timer=q(function(){this.state=K,this.tryEmit()},t.interval,this),z):K}return B},failTimeout:function(){return this._timer=q(function(){this.state=B},this.options.interval,this),B},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==K&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function te(e,t){return t=t||{},t.recognizers=h(t.recognizers,te.defaults.preset),new $e(e,t)}te.VERSION="2.0.7",te.defaults={domEvents:!1,touchAction:ct,enable:!0,inputTarget:null,inputClass:null,preset:[[Xe,{enable:!1}],[Fe,{enable:!1},["rotate"]],[qe,{direction:x}],[Ae,{direction:x},["swipe"]],[Me],[Me,{event:"doubletap",taps:2},["tap"]],[Ve]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ei=1,ft=2;function $e(e,t){this.options=v({},te.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=Ot(this),this.touchAction=new He(this,this.options.touchAction),pt(this,!0),R(this.options.recognizers,function(i){var s=this.add(new i[0](i[1]));i[2]&&s.recognizeWith(i[2]),i[3]&&s.requireFailure(i[3])},this)}$e.prototype={set:function(e){return v(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?ft:ei},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var i,s=this.recognizers,a=t.curRecognizer;(!a||a&&a.state&K)&&(a=t.curRecognizer=null);for(var r=0;r<s.length;)i=s[r],t.stopped!==ft&&(!a||i==a||i.canRecognizeWith(a))?i.recognize(e):i.reset(),!a&&i.state&(z|ne|ee)&&(a=t.curRecognizer=i),r++}},get:function(e){if(e instanceof j)return e;for(var t=this.recognizers,i=0;i<t.length;i++)if(t[i].options.event==e)return t[i];return null},add:function(e){if(w(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(w(e,"remove",this))return this;if(e=this.get(e),e){var t=this.recognizers,i=N(t,e);i!==-1&&(t.splice(i,1),this.touchAction.update())}return this},on:function(e,t){if(e!==g&&t!==g){var i=this.handlers;return R(X(e),function(s){i[s]=i[s]||[],i[s].push(t)}),this}},off:function(e,t){if(e!==g){var i=this.handlers;return R(X(e),function(s){t?i[s]&&i[s].splice(N(i[s],t),1):delete i[s]}),this}},emit:function(e,t){this.options.domEvents&&ti(e,t);var i=this.handlers[e]&&this.handlers[e].slice();if(!(!i||!i.length)){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var s=0;s<i.length;)i[s](t),s++}},destroy:function(){this.element&&pt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function pt(e,t){var i=e.element;if(i.style){var s;R(e.options.cssProps,function(a,r){s=ye(i.style,r),t?(e.oldCssProps[s]=i.style[s],i.style[s]=a):i.style[s]=e.oldCssProps[s]||""}),t||(e.oldCssProps={})}}function ti(e,t){var i=L.createEvent("Event");i.initEvent(e,!0,!0),i.gesture=t,t.target.dispatchEvent(i)}v(te,{INPUT_START:U,INPUT_MOVE:se,INPUT_END:S,INPUT_CANCEL:F,STATE_POSSIBLE:Pe,STATE_BEGAN:z,STATE_CHANGED:ne,STATE_ENDED:ee,STATE_RECOGNIZED:K,STATE_CANCELLED:pe,STATE_FAILED:B,DIRECTION_NONE:Ee,DIRECTION_LEFT:le,DIRECTION_RIGHT:ce,DIRECTION_UP:ue,DIRECTION_DOWN:he,DIRECTION_HORIZONTAL:x,DIRECTION_VERTICAL:ae,DIRECTION_ALL:Ke,Manager:$e,Input:$,TouchAction:He,TouchInput:Se,MouseInput:_e,PointerEventInput:Ue,TouchMouseInput:Ye,SingleTouchInput:at,Recognizer:j,AttrRecognizer:G,Tap:Me,Pan:Ae,Swipe:qe,Pinch:Fe,Rotate:Xe,Press:Ve,on:m,off:I,each:R,merge:Q,extend:H,assign:v,inherit:y,bindFn:c,prefixed:ye});var ii=typeof u<"u"?u:typeof self<"u"?self:{};ii.Hammer=te,l.exports?l.exports=te:u[p]=te})(window,document,"Hammer")})(wt);var Li=wt.exports;const Ri=oi(Li),Ui="/assets/fallback_swipe-6zZm0tV6.jpg",Yi={class:"tinder--cards"},ki=["src"],Hi={class:"card-details"},Fi={class:"title-card"},Vi={class:"badges"},Xi={class:"badge badge-price"},qi={class:"badge badge-condition"},$i={class:"description-card"},zi={__name:"swipeCard",props:{things:{type:Array,required:!0}},emits:["swipeRight","swipeLeft","allSwiped"],setup(l,{emit:u}){function L(c){c.target.src=Ui}const p=l,g=u,V=P(null),o=P([]),C=P([]),T=P(0),E=P(null),b=P(!1),q=Et(()=>c=>{if(c===0)return{transform:E.value?`translateX(${E.value*100}%) rotate(${E.value*30}deg)`:"",opacity:E.value?0:1,transition:b.value?"transform 0.4s ease-out, opacity 0.4s ease-out":"none",zIndex:o.value.length-c};if(c>0&&c<3){const n=1-c*.05,h=-c*10;return{transform:`scale(${n}) translateY(${h}px)`,zIndex:o.value.length-c}}else return{display:"none",zIndex:o.value.length-c}}),w=c=>{if(c){c.classList.remove("moving"),c.style.transform="",c.style.opacity="",c.style.transition="transform 0.4s ease-out, opacity 0.4s ease-out";const n=c.querySelector(".swipe-left"),h=c.querySelector(".swipe-right");n&&(n.style.opacity=0),h&&(h.style.opacity=0),ge.replace()}E.value=null,b.value=!1},R=(c,n)=>{if(b.value||C.value.length===0)return;n.classList.add("moving");const h=V.value,m=c.deltaX;h.classList.toggle("tinder_love",m>0),h.classList.toggle("tinder_nope",m<0),n.style.transform=`translate(${m}px, ${c.deltaY}px) rotate(${m*.03}deg)`;const I=Math.abs(m)/200,W=n.querySelector(".swipe-left"),_=n.querySelector(".swipe-right");W&&(W.style.opacity=m<0?I:0),_&&(_.style.opacity=m>0?I:0),ge.replace()},J=(c,n)=>{var W;if(b.value||C.value.length===0)return;const h=c.deltaX,m=h>0;if(Math.abs(h)>80){E.value=m?1:-1,b.value=!0;const _=(W=C.value[0])==null?void 0:W.id;setTimeout(()=>{if(_){const X=o.value.find(N=>N.id===_);o.value=o.value.map(N=>N.id===_?{...N,swiped:!0}:N),X&&(console.log(m),g(m?"swipeRight":"swipeLeft",X)),T.value++,v(),De(()=>w(n))}},300)}else{w(n);const _=n.querySelector(".swipe-left"),X=n.querySelector(".swipe-right");_&&(_.style.opacity=0),X&&(X.style.opacity=0)}},v=()=>{C.value=o.value.slice(T.value,T.value+3).filter(c=>!c.swiped),(C.value.length===0&&o.value.some(c=>!c.swiped)||C.value.length===0&&o.value.every(c=>c.swiped))&&g("allSwiped")},H=()=>{const c=document.querySelector(".tinder--card");if(c){const n=new Ri(c);n.on("pan",h=>R(h,c)),n.on("panend",h=>J(h,c))}},Q=c=>{var _;if(b.value||C.value.length===0)return;const n=document.querySelector(".tinder--card"),h=(_=C.value[0])==null?void 0:_.id;if(!n||!h)return;const m=c?1:-1;E.value=m,b.value=!0;const I=n.querySelector(".swipe-left"),W=n.querySelector(".swipe-right");I&&(I.style.opacity=m===-1?1:0),W&&(W.style.opacity=m===1?1:0),ge.replace(),n.style.transition="transform 0.4s ease-out, opacity 0.4s ease-out",n.style.transform=`translateX(${m*100}%) rotate(${m*30}deg)`,n.style.opacity=0,setTimeout(()=>{const X=o.value.find(N=>N.id===h);o.value=o.value.map(N=>N.id===h?{...N,swiped:!0}:N),X&&g(c?"swipeRight":"swipeLeft",X),T.value++,v(),De(()=>w(n))},400)},y=c=>{c.key==="ArrowLeft"?(c.preventDefault(),Q(!1)):c.key==="ArrowRight"&&(c.preventDefault(),Q(!0))};return We(()=>{o.value=p.things.value.map(c=>({...c,swiped:!1})),v(),De(H),window.addEventListener("keydown",y)}),Ge(()=>{window.removeEventListener("keydown",y)}),vt(C,()=>{De(H)}),vt(()=>p.things,c=>{o.value=c.map(n=>({...n,swiped:!1})),T.value=0,v()}),(c,n)=>(D(),k("div",{ref_key:"tinderContainer",ref:V,class:"tinder-container"},[f("div",Yi,[(D(!0),k(ve,null,me(C.value,(h,m)=>(D(),k("div",{key:h.id,class:"tinder--card",style:li(q.value(m))},[n[0]||(n[0]=f("div",{class:"swipe-overlay swipe-left"},[f("i",{"data-feather":"thumbs-down",class:"like"})],-1)),n[1]||(n[1]=f("div",{class:"swipe-overlay swipe-right"},[f("i",{"data-feather":"thumbs-up",class:"like"})],-1)),f("img",{src:h.imagesUrl,alt:"Card image",class:"card-image",onError:L},null,40,ki),f("div",Hi,[f("h3",Fi,O(h.name),1),f("div",Vi,[f("span",Xi,"~$"+O(h.price),1),f("span",qi,O(h.condition.name),1)]),f("p",$i,O(h.description),1)])],4))),128))])],512))}},Wi=Tt(zi,[["__scopeId","data-v-02dfd51d"]]),Gi={style:{overflow:"hidden !important"}},xi={key:0,class:"noSwaps"},ji={__name:"swaps",setup(l){const{t:u,locale:L}=ci(),p=yt();Ge(()=>{p.commit("setLoading",!0),y()});const g=n=>{console.log("Ad viewed:",n.direction,"at",new Date(n.timestamp))},V=P(""),o=P(""),C=P(!1),T=mt([]),E=new hi;We(async()=>{p.commit("setLoading",!0),ge.replace();const n=p.getters.getCachedSwipes;n&&n.length>0?(T.value=n,w.value=!0,p.commit("setLoading",!1)):await E.getFilteredThings().then(h=>{T.value=h,p.commit("setCachedSwipes",h),w.value=!0,h==null&&c(),p.commit("setLoading",!1)}),p.commit("setLoading",!1)});const b=Et(()=>T.value.length===0),q=mt({en:[{title:"🎉 Match Found!",message:"You've found a swap partner! Ready to exchange your items? Let's make this happen!"},{title:"🤝 It’s a Match!",message:"Great news! You both want to swap. Tap below to chat and finalize the exchange!"},{title:"🥳 Swap Time!",message:"You matched! Let’s get this swap rolling—hit the button to connect!"},{title:"🚀 Match Alert!",message:"You’ve got a match! Don’t miss out—click below to start your swap journey!"},{title:"🎊 It’s a Match!",message:"You and your match are ready to swap! Message them to arrange the details!"},{title:"💥 Exciting Match!",message:"You found someone to swap with! Let’s make this exchange happen!"},{title:"✨ Match Made!",message:"Congratulations! You’ve found a great swap partner. Time to chat!"},{title:"🎈 You Matched!",message:"Awesome! You matched with someone interested in swapping. Connect now!"},{title:"🌟 Swap Partner Found!",message:"You’ve found a swap partner! Ready to chat and arrange the exchange?"},{title:"🎶 It’s a Perfect Match!",message:"What a coincidence! You both want to swap. Let’s get started!"},{title:"🔔 Match Notification!",message:"You matched with someone looking to swap. Don’t wait—message them now!"},{title:"🏆 Match Success!",message:"Great job! You have a match. Time to coordinate your swap!"},{title:"💖 It’s a Great Match!",message:"You’ve matched with a fellow swapper! Let’s talk details!"},{title:"💫 You Matched Up!",message:"Fantastic! You found a swap partner. Click below to start chatting!"},{title:"🔥 Hot Match!",message:"You’ve got a match! Time to connect and finalize your swap!"},{title:"📦 Swap Partner Alert!",message:"You matched with someone ready to swap. Reach out to them now!"},{title:"🚦 Match Confirmed!",message:"You’ve found a swap partner! Ready to exchange details?"},{title:"💡 Match Found!",message:"Great news! You have a match. Start chatting to arrange the swap!"},{title:"🍀 Lucky Match!",message:"You matched with someone who wants to swap. Don’t miss your chance!"},{title:"🔗 Connection Established!",message:"You’ve got a match! Let’s connect and make that swap happen!"},{title:"🥇 It’s a Winner!",message:"You found a swap partner! Ready to start your exchange journey?"}],es:[{title:"🎉 ¡Intercambio Encontrado!",message:"¡Has encontrado un compañero para intercambiar! ¿Listo para hacer el cambio? ¡Hagámoslo realidad!"},{title:"🤝 ¡Es un Match!",message:"¡Buenas noticias! Ambos quieren intercambiar. ¡Toca abajo para chatear y cerrar el trato!"},{title:"🥳 ¡Hora de Intercambiar!",message:"¡Tienes un match! Vamos a empezar el intercambio—¡haz clic para conectar!"},{title:"🚀 ¡Alerta de Match!",message:"¡Tienes un match! No lo dejes pasar—haz clic abajo para comenzar tu intercambio."},{title:"🎊 ¡Es un Match!",message:"¡Tú y tu compañero están listos para intercambiar! Escríbele para coordinar los detalles."},{title:"💥 ¡Match Emocionante!",message:"¡Encontraste a alguien para intercambiar! ¡Hagamos este intercambio realidad!"},{title:"✨ ¡Match Perfecto!",message:"¡Felicidades! Has encontrado un gran compañero de intercambio. ¡Hora de chatear!"},{title:"🎈 ¡Tienes un Match!",message:"¡Genial! Hiciste match con alguien interesado en intercambiar. ¡Conecta ahora!"},{title:"🌟 ¡Compañero de Intercambio Encontrado!",message:"¡Has encontrado un compañero para intercambiar! ¿Listo para chatear y organizar el intercambio?"},{title:"🎶 ¡Es un Match Perfecto!",message:"¡Qué coincidencia! Ambos quieren intercambiar. ¡Empecemos!"},{title:"🔔 ¡Notificación de Match!",message:"Has hecho match con alguien interesado en intercambiar. ¡No esperes—envíale un mensaje ahora!"},{title:"🏆 ¡Match Exitoso!",message:"¡Buen trabajo! Tienes un match. ¡Hora de coordinar el intercambio!"},{title:"💖 ¡Gran Match!",message:"¡Has hecho match con otro intercambiador! ¡Hablemos de los detalles!"},{title:"💫 ¡Tienes un Match!",message:"¡Fantástico! Has encontrado un compañero de intercambio. ¡Haz clic abajo para empezar a chatear!"},{title:"🔥 ¡Match Caliente!",message:"¡Tienes un match! ¡Es hora de conectar y cerrar el intercambio!"},{title:"📦 ¡Alerta de Intercambio!",message:"Hiciste match con alguien listo para intercambiar. ¡Contáctalo ahora!"},{title:"🚦 ¡Match Confirmado!",message:"¡Has encontrado un compañero de intercambio! ¿Listo para intercambiar detalles?"},{title:"💡 ¡Match Encontrado!",message:"¡Buenas noticias! Tienes un match. ¡Empieza a chatear para organizar el intercambio!"},{title:"🍀 ¡Match Afortunado!",message:"Hiciste match con alguien que quiere intercambiar. ¡No pierdas tu oportunidad!"},{title:"🔗 ¡Conexión Establecida!",message:"¡Tienes un match! ¡Conectemos y hagamos que el intercambio suceda!"},{title:"🥇 ¡Es un Ganador!",message:"¡Encontraste un compañero de intercambio! ¿Listo para comenzar tu experiencia?"}]}),w=P(!1),R=()=>{w.value=!1},J=n=>{p.commit("setLoading",!0),w.value=!1,E.getFilteredThings({range:n.range,category_id:n.category,condition_id:n.condition,material_id:n.material,color_id:n.color,weight:[0,n.weight],price:[0,n.price],search:n.searchTerm}).then(h=>{T.value=h,p.commit("setCachedSwipes",T.value),w.value=!0,p.commit("setLoading",!1),h==null&&c()})},v=P([]),H=n=>{v.value.push({thing_id:n.id,user_id:n.user_id,liked:!0,matched:n.liked}),v.value.length==10&&y(),n.liked&&ai.fire({title:q[L.value][Math.floor(Math.random()*q[L.value].length)].title,text:q[L.value][Math.floor(Math.random()*q[L.value].length)].message,icon:"success",iconHtml:'<i data-feather="shuffle" class="custom-icon"></i>',timer:2800,timerProgressBar:!0,showConfirmButton:!1,backdrop:!0,customClass:{popup:"custom-modal",icon:"custom-icon-wrapper"},willOpen:()=>{ge.replace()}})},Q=n=>{v.value.push({thing_id:n.id,user_id:n.user_id,liked:!1,matched:!1}),v.value.length==10&&y()},y=async()=>{if(v.value.length===0)return;const n=[...v.value],h=n.map(I=>I.thing_id),m=T.value.filter(I=>!h.includes(I.id));try{v.value=[],p.commit("setCachedSwipes",m);const I=await E.loadSwipes({swipes:n});I.success&&p.commit("addMatches",I.new_chats)}catch(I){console.error("Failed to send swipes:",I)}},c=()=>{V.value="info",o.value=u("Try Searching for Something Else"),C.value=!0,setTimeout(()=>{C.value=!1},2800),T.value.length=0,p.commit("setCachedSwipes",[]),y()};return(n,h)=>(D(),k("div",Gi,[gt(si,{type:V.value,text:o.value,launch:C.value},null,8,["type","text","launch"]),gt(Di,{onSearchThingsEmit:J,onShowFiltersEmit:h[0]||(h[0]=m=>R())}),w.value&&b.value?(D(),k("h2",xi,O(n.$t("Looks like you've seen everything! Try searching for something new or expanding your range to discover more.")),1)):ze("",!0),w.value?(D(),ui(Wi,{key:1,onAdViewed:g,things:T,onSwipeRight:H,onSwipeLeft:Q,onAllSwiped:c},null,8,["things"])):ze("",!0)]))}};export{ji as default};
