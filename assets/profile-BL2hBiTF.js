import{_ as S,b as T,r as g,x as m,d as U,D as $,c as u,j as p,A as v,k as b,o as s,a as f,F as h,p as w,h as _,t as y,i as N,S as E,u as R,m as D}from"./index-CAVh_9Ev.js";import{p as B,r as L}from"./ratingCard-BpjD-exm.js";import{t as F,a as O}from"./tabChatsRates-B9IEglw9.js";import"./fallback_user-DHolJLBa.js";import"./fallback_thing_msg-BHafCOoy.js";const V={class:"profile-container"},j={class:"scroll-content"},q={key:0,class:"thereNo"},x={class:"scroll-content"},J={key:0,class:"thereNo"},M={__name:"profile",setup(z){T();const r=b(),C=new E,d=R();D(),r.getters.getUserId;const n=g([]),o=g([]),t=m(()=>r.getters.getUserDetails),l=m(()=>t.value?{userProfileImg:t.value.user.profile_picture,userName:t.value.user.name,owner:t.value.owner,rating:t.value.average_rating,things:t.value.things_count,swaps:t.value.swaps}:{userProfileImg:"",userName:"",owner:!1,rating:0,things:0,swaps:0});U(async()=>{if(r.commit("setLoading",!0),t.value)n.value=t.value.things,o.value=t.value.ratings;else try{await r.dispatch("fetchUserDetails"),n.value=t.value.things,o.value=t.value.ratings}catch(a){console.error("Failed to load user details:",a)}$.replace(),r.commit("setLoading",!1)});const A=a=>{d.push({name:"editThing",query:{thing:JSON.stringify(a)}})},I=()=>{d.push({name:"newthing"})},P=()=>{d.push({name:"editProfile"})},k=async()=>{r.commit("setLoading",!0),await C.logout(),r.dispatch("logout"),d.push({name:"login"})};return(a,i)=>(s(),u("div",V,[p(B,{userProfileImg:l.value.userProfileImg,userName:l.value.userName,owner:!0,rating:l.value.rating,things:l.value.things,swaps:l.value.swaps,onAddThing:i[0]||(i[0]=e=>I()),onEditUser:i[1]||(i[1]=e=>k()),onEditProfile:i[2]||(i[2]=e=>P())},null,8,["userProfileImg","userName","rating","things","swaps"]),p(F,{tab1:a.$t("Things"),tab2:a.$t("Reviews")},{firstTap:v(()=>[f("div",j,[(s(!0),u(h,null,w(n.value,e=>(s(),_(O,{key:e.id,thing_id:e.id,name:e.name,description:e.description,price:e.price,condition:e.condition_name,imageUrl:e.imagesUrl,owner:!0,noOwner:!1,forOffer:!1,onEditThing:c=>A(e)},null,8,["thing_id","name","description","price","condition","imageUrl","onEditThing"]))),128))]),!n.value||Array.isArray(n.value)&&n.value.length===0?(s(),u("h2",q,y(a.$t("Add your first item and start trading today!")),1)):N("",!0)]),secondTap:v(()=>[f("div",x,[(s(!0),u(h,null,w(o.value,(e,c)=>(s(),_(L,{key:c,userName:e.userName,ratingScore:e.ratingScore,ratingComment:e.ratingComment,ratingCreatedAt:e.ratingCreatedAt},null,8,["userName","ratingScore","ratingComment","ratingCreatedAt"]))),128)),!o.value||Array.isArray(o.value)&&o.value.length===0?(s(),u("h2",J,y(a.$t("Complete a trade to get your first review!")),1)):N("",!0)])]),_:1},8,["tab1","tab2"])]))}},X=S(M,[["__scopeId","data-v-7534cf3c"]]);export{X as default};
