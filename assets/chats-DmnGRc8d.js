import{f as v}from"./fallback_user-DHolJLBa.js";import{_ as g,b as N,o,c as n,a,t as r,i as l,n as y,r as b,G as C,x as k,d as p,D as I,h,F as $,p as M,k as S,u as w,l as L}from"./index-CAVh_9Ev.js";const B={class:"chat-card-image"},E=["src"],U={class:"chat-card-body"},D={class:"title-card username"},F={class:"notifications"},O={key:0,class:y(["badge","offer-badge"])},V={key:1,class:y(["badge","message-badge"])},j={key:0,class:"notification-bubble"},q={__name:"matchCard",props:{chatId:{type:Number},userName:{type:String,default:"Username"},image:{type:String,default:"src/assets/images/p2.jpg"},message:{type:Number,default:0},offer:{type:Number,default:0}},emits:["selectChat"],setup(e,{emit:t}){N();function d(c){c.target.src=v}const f=t,m=()=>{f("selectChat")};return(c,s)=>(o(),n("div",{class:"chat-card",onClick:m},[a("div",B,[a("img",{src:e.image,alt:"User Avatar",class:"avatar",onError:d},null,40,E)]),a("div",U,[a("h5",D,r(e.userName),1),a("div",F,[e.offer>0?(o(),n("span",O,r(e.offer)+" "+r(e.offer===1?c.$t("New Offer"):c.$t("New Offers")),1)):l("",!0),e.message>0?(o(),n("span",V,r(e.message)+" "+r(e.message===1?c.$t("New Message"):c.$t("New Messages")),1)):l("",!0)])]),e.offer>0||e.message>0?(o(),n("div",j,[a("span",null,r(e.offer+e.message),1)])):l("",!0)]))}},z=g(q,[["__scopeId","data-v-04c7dd82"]]),A={class:"tittle"},G={key:1,class:"noChats"},R={class:"scrolling"},W={__name:"chats",setup(e){const t=S(),d=w(),f=b(!1);C(()=>{t.commit("setLoading",!0)});const m=k(()=>t.getters.getMatches||[]);p(async()=>{if(I.replace(),t.getters.getMatches)t.commit("setLoading",!1);else try{t.commit("setLoading",!0),await t.dispatch("fetchMatches")}catch(s){console.error("Error loading matches:",s)}finally{t.commit("setLoading",!1)}t.commit("setLoading",!1)});const c=s=>{d.push({name:"messages",query:{chatId:s.chat_id,userName:s.name,image:s.profile_picture,userId:s.userId}})};return(s,u)=>(o(),n("div",null,[f.value?(o(),h(L,{key:0})):l("",!0),a("h1",A,r(s.$t("Chats")),1),u[0]||(u[0]=a("div",{class:"line"},null,-1)),m.value.length==0?(o(),n("h2",G,r(s.$t("No matches, no messagesâ€”yet! Swipe more to find great exchanges.")),1)):l("",!0),a("div",R,[(o(!0),n($,null,M(m.value,(i,_)=>(o(),h(z,{key:_,chatId:i.chatId,userName:i.name,image:i.profile_picture,offer:i.offers_count,message:i.unread_messages_count,onSelectChat:x=>c(i)},null,8,["chatId","userName","image","offer","message","onSelectChat"]))),128))])]))}},K=g(W,[["__scopeId","data-v-d15e10e4"]]);export{K as default};
