import{_ as G,b as J,r as i,G as P,d as W,D as z,c as n,j as H,a as o,t as l,w as k,e as r,v as C,q as L,F as I,p as T,m as K,k as Q,o as u,u as X,S as Y}from"./index-BnJMMCb_.js";import{s as Z}from"./successErrorCard-9M0xn-1G.js";const O={class:"edit-thing-page"},x={class:"container"},ee={"data-feather":"image",class:"iconStyle"},te={class:"title"},oe={class:"input-group"},se=["placeholder"],ie={class:"input-group"},ae=["placeholder"],le={class:"input-group half-input-group"},ne=["placeholder"],ue={value:"",disabled:""},re=["value"],de={class:"input-group third-input-group"},ce=["placeholder"],pe={value:"",disabled:""},ve=["value"],ge={value:"",disabled:""},me=["value"],he={class:"input-group"},fe={value:"",disabled:""},ye=["value"],_e={class:"buttons-container"},be={__name:"editThing",setup(we){const{t:v}=J(),F=K(),E=X(),a=Q(),U=new Y,c=i(""),p=i(""),d=i(!1),g=i(""),m=i(""),h=i(""),f=i(""),y=i(""),_=i(""),b=i(""),w=i(""),$=i([]),V=i([]),q=i([]),D=i([]),M=i(null),A=i([]),S=i(null);P(()=>{a.commit("setLoading",!0)}),W(()=>{z.replace(),$.value=a.getters.getConditions,D.value=a.getters.getCategories,q.value=a.getters.getMaterials,V.value=a.getters.getColors;const t=JSON.parse(F.query.thing);g.value=t.name,m.value=t.description,h.value=t.price,f.value=t.condition_id,y.value=t.weight,_.value=t.color_id,b.value=t.material_id,w.value=t.category_id,S.value=t.id,a.commit("setLoading",!1)});const B=()=>{M.value.click()},N=t=>{const s=Array.from(t.target.files);A.value=s},R=async()=>{try{if(a.commit("setLoading",!0),(await U.deleteThing(S.value)).success)a.commit("deleteThingFromStore",S.value),E.push({name:"profile"}),c.value="success",p.value=v("Thing deleted successfully"),d.value=!0;else throw new Error("Delete failed")}catch{c.value="error",p.value=v("Error deleting thing"),d.value=!0,setTimeout(()=>{d.value=!1},2800)}finally{a.commit("setLoading",!1)}},j=async()=>{a.commit("setLoading",!0);const t={thingID:S.value,name:g.value,description:m.value,price:h.value,condition_id:f.value,weight:y.value,color_id:_.value,material_id:b.value,category_id:w.value,imagesUrl:A.value};try{const s=await U.updateThing(t);if(s.success&&s.thing)a.commit("updateThingInStore",s.thing),E.push({name:"profile"}),c.value="success",p.value=v("Thing Successfully Edited"),d.value=!0;else throw new Error("Update failed")}catch{c.value="error",p.value=v("Error editing thing"),d.value=!0,setTimeout(()=>{d.value=!1},2800)}finally{a.commit("setLoading",!1)}};return(t,s)=>(u(),n("div",O,[H(Z,{type:c.value,text:p.value,launch:d.value},null,8,["type","text","launch"]),o("div",x,[o("div",{class:"cont_logo selected",id:"ImageInput",onClick:B},[o("i",ee,[o("input",{type:"file",ref_key:"fileInput",ref:M,style:{display:"none"},onChange:N,accept:"image/*",multiple:""},null,544)])]),o("h1",te,l(t.$t("Edit Item")),1),o("form",{onSubmit:s[8]||(s[8]=k((...e)=>t.handleSubmit&&t.handleSubmit(...e),["prevent"])),class:"form"},[o("div",oe,[r(o("input",{type:"text",id:"name","onUpdate:modelValue":s[0]||(s[0]=e=>g.value=e),required:"",class:"inputLogin",placeholder:t.$t("Thing Name")},null,8,se),[[C,g.value]])]),o("div",ie,[r(o("textarea",{id:"description","onUpdate:modelValue":s[1]||(s[1]=e=>m.value=e),required:"",class:"inputLogin",placeholder:t.$t("Description"),rows:"3"},null,8,ae),[[C,m.value]])]),o("div",le,[r(o("input",{type:"number",id:"price","onUpdate:modelValue":s[2]||(s[2]=e=>h.value=e),required:"",class:"inputLogin half-input",placeholder:t.$t("Price")},null,8,ne),[[C,h.value]]),r(o("select",{id:"condition","onUpdate:modelValue":s[3]||(s[3]=e=>f.value=e),required:"",class:"inputLogin half-input"},[o("option",ue,l(t.$t("Condition")),1),(u(!0),n(I,null,T($.value,e=>(u(),n("option",{key:e.id,value:e.id},l(e.name),9,re))),128))],512),[[L,f.value]])]),o("div",de,[r(o("input",{type:"number",id:"weight","onUpdate:modelValue":s[4]||(s[4]=e=>y.value=e),class:"inputLogin third-input",placeholder:t.$t("Weight")},null,8,ce),[[C,y.value]]),r(o("select",{id:"color","onUpdate:modelValue":s[5]||(s[5]=e=>_.value=e),required:"",class:"inputLogin third-input"},[o("option",pe,l(t.$t("Color")),1),(u(!0),n(I,null,T(V.value,e=>(u(),n("option",{key:e.id,value:e.id},l(e.name),9,ve))),128))],512),[[L,_.value]]),r(o("select",{id:"material","onUpdate:modelValue":s[6]||(s[6]=e=>b.value=e),required:"",class:"inputLogin third-input"},[o("option",ge,l(t.$t("Material")),1),(u(!0),n(I,null,T(q.value,e=>(u(),n("option",{key:e.id,value:e.id},l(e.name),9,me))),128))],512),[[L,b.value]])]),o("div",he,[r(o("select",{id:"category","onUpdate:modelValue":s[7]||(s[7]=e=>w.value=e),class:"inputLogin"},[o("option",fe,l(t.$t("Categories")),1),(u(!0),n(I,null,T(D.value,e=>(u(),n("option",{key:e.id,value:e.id},l(e.name),9,ye))),128))],512),[[L,w.value]])]),o("div",_e,[o("button",{type:"button",class:"delete-button",onClick:k(R,["prevent"])},l(t.$t("Delete Item")),1),o("button",{type:"submit",class:"submit-button",onClick:k(j,["prevent"])},l(t.$t("Save Changes")),1)])],32)])]))}},Le=G(be,[["__scopeId","data-v-2b7925db"]]);export{Le as default};
