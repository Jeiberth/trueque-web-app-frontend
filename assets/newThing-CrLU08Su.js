import{_ as P,b as j,r as s,E as z,G,d as W,D as H,c as u,j as J,a,n as K,t as o,w as Q,e as r,v as C,q as L,F as S,p as U,k as X,o as i,m as Y,u as Z,S as x}from"./index-BVQVUG6A.js";import{s as O}from"./successErrorCard-BZgrvj8_.js";const ee={class:"whole-page"},te={class:"container"},ae={class:"title"},le={class:"input-group"},se=["placeholder"],oe={class:"input-group"},ne=["placeholder"],ue={class:"input-group half-input-group"},ie=["placeholder"],re={value:"",disabled:""},de=["value"],pe={class:"input-group third-input-group"},ce=["placeholder"],ve={value:"",disabled:""},me=["value"],ge={value:"",disabled:""},he=["value"],fe={class:"input-group"},_e={value:"",disabled:""},ye=["value"],we={type:"submit",class:"submit-button"},be={__name:"newThing",setup(Ce){const{t:V}=j();Y();const D=Z(),c=s(""),v=s(""),d=s(!1),n=X(),F=new x,m=s(""),g=s(""),h=s(""),f=s(""),_=s(""),y=s(""),w=s(""),b=s("");z([]);const I=s([]),T=s([]),E=s([]),q=s([]),A=s(null),p=s([]),$=s(!1),k=s(!1),M=()=>{A.value.click()},B=l=>{const t=Array.from(l.target.files);t.length>0?(p.value=t,$.value=!0,k.value=!1):(p.value=null,$.value=!1)};G(()=>{n.commit("setLoading",!0)}),W(async()=>{I.value=n.getters.getConditions,q.value=n.getters.getCategories,E.value=n.getters.getMaterials,T.value=n.getters.getColors,H.replace(),n.commit("setLoading",!1)});const N=()=>{m.value=null,g.value=null,h.value=null,f.value=null,_.value=null,y.value=null,w.value=null,b.value=null,p.value=[]},R=async()=>{if(!p.value||p.value.length===0){k.value=!0,v.value=V("Please upload an image"),c.value="error",d.value=!0,setTimeout(()=>{d.value=!1},2800);return}n.commit("setLoading",!0);const l=new FormData;l.append("name",m.value),l.append("description",g.value),l.append("price",h.value),l.append("condition_id",f.value),l.append("weight",_.value),l.append("color_id",y.value),l.append("material_id",w.value),l.append("category_id",b.value),p.value.forEach((t,e)=>{l.append(`images[${e}]`,t)});try{const t=await F.newThing(l);N(),n.commit("addNewThing",t),D.push({name:"profile"}),c.value="success",v.value=V("Thing Successfully Created"),d.value=!0,setTimeout(()=>{d.value=!1},2800)}catch{c.value="error",v.value=V("Error creating thing"),d.value=!0,setTimeout(()=>{d.value=!1},2800)}finally{n.commit("setLoading",!1)}};return(l,t)=>(i(),u("div",ee,[J(O,{type:c.value,text:v.value,launch:d.value},null,8,["type","text","launch"]),a("div",te,[a("div",{class:K(["cont_logo",{selected:$.value,"error-border":k.value}]),id:"ImageInput",onClick:M},[t[8]||(t[8]=a("i",{"data-feather":"image",class:"iconStyle"},null,-1)),a("input",{type:"file",ref_key:"fileInput",ref:A,style:{display:"none"},onChange:B,accept:"image/*",multiple:""},null,544)],2),a("h1",ae,o(l.$t("Add Item")),1),a("form",{onSubmit:Q(R,["prevent"]),class:"form"},[a("div",le,[r(a("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),required:"",class:"inputLogin",placeholder:l.$t("Thing Name")},null,8,se),[[C,m.value]])]),a("div",oe,[r(a("textarea",{id:"description","onUpdate:modelValue":t[1]||(t[1]=e=>g.value=e),required:"",class:"inputLogin",placeholder:l.$t("Description"),rows:"3"},null,8,ne),[[C,g.value]])]),a("div",ue,[r(a("input",{type:"number",id:"price","onUpdate:modelValue":t[2]||(t[2]=e=>h.value=e),required:"",class:"inputLogin half-input",placeholder:l.$t("Price")},null,8,ie),[[C,h.value]]),r(a("select",{id:"condition","onUpdate:modelValue":t[3]||(t[3]=e=>f.value=e),required:"",class:"inputLogin half-input"},[a("option",re,o(l.$t("Condition")),1),(i(!0),u(S,null,U(I.value,e=>(i(),u("option",{key:e.id,value:e.id},o(e.name),9,de))),128))],512),[[L,f.value]])]),a("div",pe,[r(a("input",{type:"number",id:"weight","onUpdate:modelValue":t[4]||(t[4]=e=>_.value=e),class:"inputLogin third-input",placeholder:l.$t("Weight")},null,8,ce),[[C,_.value]]),r(a("select",{id:"color","onUpdate:modelValue":t[5]||(t[5]=e=>y.value=e),required:"",class:"inputLogin third-input"},[a("option",ve,o(l.$t("Color")),1),(i(!0),u(S,null,U(T.value,e=>(i(),u("option",{key:e.id,value:e.id},o(e.name),9,me))),128))],512),[[L,y.value]]),r(a("select",{id:"material","onUpdate:modelValue":t[6]||(t[6]=e=>w.value=e),required:"",class:"inputLogin third-input"},[a("option",ge,o(l.$t("Material")),1),(i(!0),u(S,null,U(E.value,e=>(i(),u("option",{key:e.id,value:e.id},o(e.name),9,he))),128))],512),[[L,w.value]])]),a("div",fe,[r(a("select",{id:"category","onUpdate:modelValue":t[7]||(t[7]=e=>b.value=e),required:"",class:"inputLogin"},[a("option",_e,o(l.$t("Categories")),1),(i(!0),u(S,null,U(q.value,e=>(i(),u("option",{key:e.id,value:e.id},o(e.name),9,ye))),128))],512),[[L,b.value]])]),a("button",we,o(l.$t("Add Item")),1)],32)])]))}},Ue=P(be,[["__scopeId","data-v-ab7cef51"]]);export{Ue as default};
