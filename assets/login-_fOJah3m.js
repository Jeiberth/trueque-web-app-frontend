import{_ as C,b as $,r as l,d as L,c as E,a as t,t as i,w as I,e as p,v as h,f as V,g,h as D,i as R,j as M,k as P,o as f,u as B,l as N,S as U}from"./index-TjX6KoRz.js";import{s as q}from"./successErrorCard-CGbosYrd.js";const x={class:"landing-page"},j={class:"container"},A={class:"title"},F={class:"input-group"},z=["placeholder"],G={class:"input-group"},H=["placeholder"],J={class:"terms-container"},K={class:"terms-checkbox"},O={class:"terms-text"},Q={href:"https://www.trueque.art/#/privacy",target:"_blank"},W=["disabled"],X={__name:"login",setup(Y){const{t:_,locale:w}=$(),s=P(),y=new U,n=B(),v=l("error"),c=l("The provided credentials are incorrect"),o=l(!1),k=l(!1),d=l(""),m=l(""),u=l(!1);L(()=>{s.commit("setLoading",!1)});const b=()=>{n.push({name:"register"})},T=()=>{n.push({name:"emailPasswordReset"})},S=()=>{u.value&&(s.commit("setLoading",!0),y.login({email:d.value,password:m.value}).then(e=>{"token"in e?(s.dispatch("setAuthData",{token:e.token,userId:e.user_id}),localStorage.setItem("access_token",e.token),s.dispatch("initEcho"),w.value=e.language,s.commit("setCachedSwipes",e.things),s.commit("setUserDetails",e.userDetails),s.commit("setMatches",e.userChats),n.push({name:"swaps"})):"verify"in e?(v.value="info",c.value=e.message,o.value=!0,setTimeout(()=>{o.value=!1},2800),n.push({name:"verifyEmail"})):(o.value=!0,setTimeout(()=>{o.value=!1},2800))}).catch(e=>{c.value=_("Email or password are incorrect."),o.value=!0,setTimeout(()=>{o.value=!1},2800)}).finally(()=>{s.commit("setLoading",!1)}))};return(e,a)=>(f(),E("div",x,[t("div",j,[a[3]||(a[3]=t("div",{class:"cont_logo"},null,-1)),t("h1",A,i(e.$t("Log In")),1),t("form",{onSubmit:I(S,["prevent"]),class:"form"},[t("div",F,[p(t("input",{type:"email",id:"email","onUpdate:modelValue":a[0]||(a[0]=r=>d.value=r),required:"",class:"inputLogin",placeholder:e.$t("E-mail")},null,8,z),[[h,d.value]])]),t("div",G,[p(t("input",{type:"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=r=>m.value=r),required:"",class:"inputLogin",placeholder:e.$t("Password")},null,8,H),[[h,m.value]]),t("p",{class:"forgot",onClick:T},i(e.$t("Forgot your password?")),1)]),t("div",J,[t("label",K,[p(t("input",{type:"checkbox",id:"terms","onUpdate:modelValue":a[2]||(a[2]=r=>u.value=r)},null,512),[[V,u.value]]),t("span",O,[g(i(e.$t("I agree to the"))+" ",1),t("a",Q,i(e.$t("Terms of Service and Privacy Policy")),1)])])]),t("button",{type:"submit",class:"submit-button",disabled:!u.value},i(e.$t("Log In")),9,W),t("p",{class:"createLabel",onClick:b},[g(i(e.$t("Don't have an account?"))+" ",1),t("strong",null,i(e.$t("Create one")),1)])],32),k.value?(f(),D(N,{key:0})):R("",!0),M(q,{type:v.value,text:c.value,launch:o.value},null,8,["type","text","launch"])])]))}},te=C(X,[["__scopeId","data-v-328e6aed"]]);export{te as default};
