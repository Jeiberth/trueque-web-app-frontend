import{_ as D,b as z,r as a,c as v,a as s,w as j,n as G,t as o,e as r,v as m,F as H,k as J,l as K,m as O,f as Q,g as W,h as X,p as Y,o as g,u as Z,S as ee}from"./index-VV4m-x9p.js";import{s as se}from"./successErrorCard-CB3OrHzM.js";import"./feather-Cq3Jd1xS.js";const te={class:"register-page"},ae={class:"container"},le={"data-feather":"image",class:"iconStyle"},oe={class:"title"},ne={class:"input-group"},ie=["placeholder"],re={class:"input-group address-input"},ue=["disabled","placeholder"],de={key:0,class:"dropdown"},ce=["onClick"],pe={class:"input-group"},ve=["placeholder"],me={class:"input-group"},ge=["placeholder"],he={class:"input-group"},_e={value:"",disabled:""},fe={value:"en"},ye={value:"es"},be={class:"terms-container"},we={class:"terms-checkbox"},$e={class:"terms-text"},ke={href:"https://www.trueque.art/#/privacy",target:"_blank"},Ce=["disabled"],Ie={__name:"register",setup(Se){const{t:C,locale:E}=z(),U=new ee,I=Z(),h=a("success"),d=a(""),n=a(!1),c=a(!1),_=a(""),i=a(""),f=a(""),y=a(""),b=a(""),S=a(null),T=a(null),p=a([]);let L=null;const V=a(null),u=a(),w=a(!1),$=a(!1),q=()=>{V.value.click()},F=e=>{const t=Array.from(e.target.files);t.length>0?(u.value=t,w.value=!0,$.value=!1):(u.value=null,w.value=!1)},A=()=>{clearTimeout(L),L=setTimeout(M,500)},N=()=>{I.push({name:"login"})},P=e=>{E.value=e.target.value},k=a(!1),M=async()=>{if(!(i.value.length<3)){k.value=!0;try{const e=await Y.get("https://photon.komoot.io/api/",{params:{q:i.value,limit:5}});p.value=e.data.features.map(t=>({display_name:t.properties.housenumber&&t.properties.street?`${t.properties.housenumber} ${t.properties.street}, ${t.properties.city}`:`${t.properties.name}, ${t.properties.city}`,lat:t.geometry.coordinates[1],lon:t.geometry.coordinates[0]}))}catch(e){console.error("Error fetching address suggestions",e)}k.value=!1}},R=e=>{i.value=e.display_name,S.value=e.lat,T.value=e.lon,p.value=[]},x=()=>{if(c.value){if(!u.value||u.value.length===0){$.value=!0,d.value=C("Please upload a profile image"),h.value="error",n.value=!0,setTimeout(()=>{n.value=!1},2800);return}store.commit("setLoading",!0),U.register({name:_.value,address:{street:i.value,latitude:S.value,longitude:T.value},email:f.value,password:y.value,language:b.value,profileImg:u.value}).then(()=>{h.value="success",d.value=C("Account created! Please verify your email."),n.value=!0,setTimeout(()=>{n.value=!1},2800),I.push({name:"verifyEmail"})}).catch(e=>{d.value=e,n.value=!0,setTimeout(()=>{n.value=!1},2800)}).finally(()=>{store.commit("setLoading",!1)})}};return(e,t)=>(g(),v("div",te,[s("div",ae,[s("form",{onSubmit:j(x,["prevent"]),class:"form"},[s("div",{class:G(["cont_logo",{selected:w.value,"error-border":$.value}]),id:"ImageInput",onClick:q},[s("i",le,[s("input",{type:"file",ref_key:"fileInput",ref:V,style:{display:"none"},required:"",onChange:F,accept:"image/*",multiple:""},null,544)])],2),s("h1",oe,o(e.$t("Register")),1),s("div",ne,[r(s("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=l=>_.value=l),required:"",class:"inputLogin",placeholder:e.$t("Full Name")},null,8,ie),[[m,_.value]])]),s("div",re,[r(s("input",{type:"text",id:"city","onUpdate:modelValue":t[1]||(t[1]=l=>i.value=l),onInput:A,disabled:k.value,required:"",class:"inputLogin",placeholder:e.$t("Enter your address")},null,40,ue),[[m,i.value]]),p.value.length?(g(),v("div",de,[(g(!0),v(H,null,J(p.value,(l,B)=>(g(),v("div",{key:B,class:"dropdown-item",onClick:Te=>R(l)},o(l.display_name),9,ce))),128))])):K("",!0)]),s("div",pe,[r(s("input",{type:"email",id:"email","onUpdate:modelValue":t[2]||(t[2]=l=>f.value=l),required:"",class:"inputLogin",placeholder:e.$t("E-mail")},null,8,ve),[[m,f.value]])]),s("div",me,[r(s("input",{type:"password",id:"password","onUpdate:modelValue":t[3]||(t[3]=l=>y.value=l),required:"",class:"inputLogin",placeholder:e.$t("Password")},null,8,ge),[[m,y.value]])]),s("div",he,[r(s("select",{id:"language","onUpdate:modelValue":t[4]||(t[4]=l=>b.value=l),class:"inputLogin",onChange:P},[s("option",_e,o(e.$t("Language")),1),s("option",fe,o(e.$t("English")),1),s("option",ye,o(e.$t("Spanish")),1)],544),[[O,b.value]])]),s("div",be,[s("label",we,[r(s("input",{type:"checkbox",id:"terms","onUpdate:modelValue":t[5]||(t[5]=l=>c.value=l)},null,512),[[Q,c.value]]),s("span",$e,[W(o(e.$t("I agree to the"))+" ",1),s("a",ke,o(e.$t("Terms of Service and Privacy Policy")),1)])])]),s("button",{type:"submit",class:"submit-button",disabled:!c.value},o(e.$t("Sign Up")),9,Ce),s("p",{class:"login-link",onClick:N},o(e.$t("Already have an account?")),1)],32)]),X(se,{type:h.value,text:d.value,launch:n.value},null,8,["type","text","launch"])]))}},Ue=D(Ie,[["__scopeId","data-v-8fedb0b8"]]);export{Ue as default};
