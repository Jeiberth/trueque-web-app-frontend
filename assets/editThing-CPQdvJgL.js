import{_ as J,b as P,r as i,D as W,d as z,c as n,h as G,a as o,t as l,w as T,e as r,v as C,m as L,F as $,k as I,j as H,i as K,o as u,u as Q,S as X}from"./index-BMCsW35F.js";import{f as Y}from"./feather-C4m1glYC.js";import{s as Z}from"./successErrorCard-BYWK69lD.js";const O={class:"edit-thing-page"},x={class:"container"},ee={"data-feather":"image",class:"iconStyle"},te={class:"title"},oe={class:"input-group"},se=["placeholder"],ie={class:"input-group"},ae=["placeholder"],le={class:"input-group half-input-group"},ne=["placeholder"],ue={value:"",disabled:""},re=["value"],de={class:"input-group third-input-group"},ce=["placeholder"],pe={value:"",disabled:""},ve=["value"],ge={value:"",disabled:""},me=["value"],he={class:"input-group"},fe={value:"",disabled:""},ye=["value"],_e={class:"buttons-container"},be={__name:"editThing",setup(we){const{t:v}=P(),F=H(),k=Q(),a=K(),E=new X,c=i(""),p=i(""),d=i(!1),g=i(""),m=i(""),h=i(""),f=i(""),y=i(""),_=i(""),b=i(""),w=i(""),U=i([]),V=i([]),D=i([]),q=i([]),M=i(null),A=i([]),S=i(null);W(()=>{a.commit("setLoading",!0)}),z(()=>{Y.replace(),U.value=a.getters.getConditions,q.value=a.getters.getCategories,D.value=a.getters.getMaterials,V.value=a.getters.getColors;const e=JSON.parse(F.query.thing);g.value=e.name,m.value=e.description,h.value=e.price,f.value=e.condition_id,y.value=e.weight,_.value=e.color_id,b.value=e.material_id,w.value=e.category_id,S.value=e.id,a.commit("setLoading",!1)});const B=()=>{M.value.click()},N=e=>{const s=Array.from(e.target.files);A.value=s},R=async()=>{try{if(a.commit("setLoading",!0),(await E.deleteThing(S.value)).success)a.commit("deleteThingFromStore",S.value),k.push({name:"profile"}),c.value="success",p.value=v("Thing deleted successfully"),d.value=!0;else throw new Error("Delete failed")}catch{c.value="error",p.value=v("Error deleting thing"),d.value=!0,setTimeout(()=>{d.value=!1},2800)}finally{a.commit("setLoading",!1)}},j=async()=>{a.commit("setLoading",!0);const e={thingID:S.value,name:g.value,description:m.value,price:h.value,condition_id:f.value,weight:y.value,color_id:_.value,material_id:b.value,category_id:w.value,imagesUrl:A.value};try{const s=await E.updateThing(e);if(s.success&&s.thing)a.commit("updateThingInStore",s.thing),k.push({name:"profile"}),c.value="success",p.value=v("Thing Successfully Edited"),d.value=!0;else throw new Error("Update failed")}catch{c.value="error",p.value=v("Error editing thing"),d.value=!0,setTimeout(()=>{d.value=!1},2800)}finally{a.commit("setLoading",!1)}};return(e,s)=>(u(),n("div",O,[G(Z,{type:c.value,text:p.value,launch:d.value},null,8,["type","text","launch"]),o("div",x,[o("div",{class:"cont_logo selected",id:"ImageInput",onClick:B},[o("i",ee,[o("input",{type:"file",ref_key:"fileInput",ref:M,style:{display:"none"},onChange:N,accept:"image/*",multiple:""},null,544)])]),o("h1",te,l(e.$t("Edit Item")),1),o("form",{onSubmit:s[8]||(s[8]=T((...t)=>e.handleSubmit&&e.handleSubmit(...t),["prevent"])),class:"form"},[o("div",oe,[r(o("input",{type:"text",id:"name","onUpdate:modelValue":s[0]||(s[0]=t=>g.value=t),required:"",class:"inputLogin",placeholder:e.$t("Thing Name")},null,8,se),[[C,g.value]])]),o("div",ie,[r(o("textarea",{id:"description","onUpdate:modelValue":s[1]||(s[1]=t=>m.value=t),required:"",class:"inputLogin",placeholder:e.$t("Description"),rows:"3"},null,8,ae),[[C,m.value]])]),o("div",le,[r(o("input",{type:"number",id:"price","onUpdate:modelValue":s[2]||(s[2]=t=>h.value=t),required:"",class:"inputLogin half-input",placeholder:e.$t("Price")},null,8,ne),[[C,h.value]]),r(o("select",{id:"condition","onUpdate:modelValue":s[3]||(s[3]=t=>f.value=t),required:"",class:"inputLogin half-input"},[o("option",ue,l(e.$t("Condition")),1),(u(!0),n($,null,I(U.value,t=>(u(),n("option",{key:t.id,value:t.id},l(e.$t(t.name)),9,re))),128))],512),[[L,f.value]])]),o("div",de,[r(o("input",{type:"number",id:"weight","onUpdate:modelValue":s[4]||(s[4]=t=>y.value=t),class:"inputLogin third-input",placeholder:e.$t("Weight")},null,8,ce),[[C,y.value]]),r(o("select",{id:"color","onUpdate:modelValue":s[5]||(s[5]=t=>_.value=t),required:"",class:"inputLogin third-input"},[o("option",pe,l(e.$t("Color")),1),(u(!0),n($,null,I(V.value,t=>(u(),n("option",{key:t.id,value:t.id},l(e.$t(t.name)),9,ve))),128))],512),[[L,_.value]]),r(o("select",{id:"material","onUpdate:modelValue":s[6]||(s[6]=t=>b.value=t),required:"",class:"inputLogin third-input"},[o("option",ge,l(e.$t("Material")),1),(u(!0),n($,null,I(D.value,t=>(u(),n("option",{key:t.id,value:t.id},l(e.$t(t.name)),9,me))),128))],512),[[L,b.value]])]),o("div",he,[r(o("select",{id:"category","onUpdate:modelValue":s[7]||(s[7]=t=>w.value=t),class:"inputLogin"},[o("option",fe,l(e.$t("Categories")),1),(u(!0),n($,null,I(q.value,t=>(u(),n("option",{key:t.id,value:t.id},l(e.$t(t.name)),9,ye))),128))],512),[[L,w.value]])]),o("div",_e,[o("button",{type:"button",class:"delete-button",onClick:T(R,["prevent"])},l(e.$t("Delete Item")),1),o("button",{type:"submit",class:"submit-button",onClick:T(j,["prevent"])},l(e.$t("Save Changes")),1)])],32)])]))}},$e=J(be,[["__scopeId","data-v-15c11292"]]);export{$e as default};
