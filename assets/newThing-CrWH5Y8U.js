import{_ as W,b as j,r as s,C as z,D as G,d as H,c as i,h as J,a as l,n as K,t as o,w as Q,e as d,v as I,m as S,F as T,k as U,i as X,o as r,j as Y,u as Z,S as O}from"./index-VZJWoiHj.js";import{f as x}from"./feather-DGZv_OKY.js";import{s as ee}from"./successErrorCard-CsDnWBLS.js";const te={class:"whole-page"},ae={class:"container"},le={class:"title"},se={class:"input-group"},oe=["placeholder"],ne={class:"input-group"},ue=["placeholder"],ie={class:"input-group half-input-group"},re=["placeholder"],de={value:"",disabled:""},pe=["value"],ve={class:"input-group third-input-group"},ce=["placeholder"],me={value:"",disabled:""},ge=["value"],he={value:"",disabled:""},fe=["value"],ye={class:"input-group"},_e={value:"",disabled:""},we=["value"],Ce={type:"submit",class:"submit-button"},be={__name:"newThing",setup($e){const{t:m}=j();Y();const D=Z(),v=s(""),c=s(""),n=s(!1),u=X(),F=new O,g=s(""),h=s(""),f=s(""),y=s(""),_=s(""),w=s(""),C=s(""),b=s("");z([]);const V=s([]),k=s([]),E=s([]),q=s([]),A=s(null),p=s([]),$=s(!1),L=s(!1),M=()=>{A.value.click()},B=t=>{const a=Array.from(t.target.files);if(a.length>0){if(!a.every(P=>P.type.startsWith("image/"))){c.value=m("Only image files are allowed."),v.value="error",n.value=!0,setTimeout(()=>{n.value=!1},2800),p.value=null,$.value=!1,L.value=!0;return}p.value=a,$.value=!0,L.value=!1}else p.value=null,$.value=!1};G(()=>{u.commit("setLoading",!0)}),H(async()=>{V.value=u.getters.getConditions,q.value=u.getters.getCategories,E.value=u.getters.getMaterials,k.value=u.getters.getColors,x.replace(),u.commit("setLoading",!1)});const N=()=>{g.value=null,h.value=null,f.value=null,y.value=null,_.value=null,w.value=null,C.value=null,b.value=null,p.value=[]},R=async()=>{if(!p.value||p.value.length===0){L.value=!0,c.value=m("Please upload an image"),v.value="error",n.value=!0,setTimeout(()=>{n.value=!1},2800);return}u.commit("setLoading",!0);const t=new FormData;t.append("name",g.value),t.append("description",h.value),t.append("price",f.value),t.append("condition_id",y.value),t.append("weight",_.value),t.append("color_id",w.value),t.append("material_id",C.value),t.append("category_id",b.value),p.value.forEach((a,e)=>{t.append(`images[${e}]`,a)});try{const a=await F.newThing(t);N(),u.commit("addNewThing",a),D.push({name:"profile"}),v.value="success",c.value=m("Thing Successfully Created"),n.value=!0,setTimeout(()=>{n.value=!1},2800)}catch{v.value="error",c.value=m("Error creating thing"),n.value=!0,setTimeout(()=>{n.value=!1},2800)}finally{u.commit("setLoading",!1)}};return(t,a)=>(r(),i("div",te,[J(ee,{type:v.value,text:c.value,launch:n.value},null,8,["type","text","launch"]),l("div",ae,[l("div",{class:K(["cont_logo",{selected:$.value,"error-border":L.value}]),id:"ImageInput",onClick:M},[a[8]||(a[8]=l("i",{"data-feather":"image",class:"iconStyle"},null,-1)),l("input",{type:"file",ref_key:"fileInput",ref:A,style:{display:"none"},onChange:B,accept:"image/*",multiple:""},null,544)],2),l("h1",le,o(t.$t("Add Item")),1),l("form",{onSubmit:Q(R,["prevent"]),class:"form"},[l("div",se,[d(l("input",{type:"text",id:"name","onUpdate:modelValue":a[0]||(a[0]=e=>g.value=e),required:"",class:"inputLogin",placeholder:t.$t("Thing Name")},null,8,oe),[[I,g.value]])]),l("div",ne,[d(l("textarea",{id:"description","onUpdate:modelValue":a[1]||(a[1]=e=>h.value=e),required:"",class:"inputLogin",placeholder:t.$t("Description"),rows:"3"},null,8,ue),[[I,h.value]])]),l("div",ie,[d(l("input",{type:"number",id:"price","onUpdate:modelValue":a[2]||(a[2]=e=>f.value=e),required:"",class:"inputLogin half-input",placeholder:t.$t("Price")},null,8,re),[[I,f.value]]),d(l("select",{id:"condition","onUpdate:modelValue":a[3]||(a[3]=e=>y.value=e),required:"",class:"inputLogin half-input"},[l("option",de,o(t.$t("Condition")),1),(r(!0),i(T,null,U(V.value,e=>(r(),i("option",{key:e.id,value:e.id},o(t.$t(e.name)),9,pe))),128))],512),[[S,y.value]])]),l("div",ve,[d(l("input",{type:"number",id:"weight","onUpdate:modelValue":a[4]||(a[4]=e=>_.value=e),class:"inputLogin third-input",placeholder:t.$t("Weight")},null,8,ce),[[I,_.value]]),d(l("select",{id:"color","onUpdate:modelValue":a[5]||(a[5]=e=>w.value=e),required:"",class:"inputLogin third-input"},[l("option",me,o(t.$t("Color")),1),(r(!0),i(T,null,U(k.value,e=>(r(),i("option",{key:e.id,value:e.id},o(t.$t(e.name)),9,ge))),128))],512),[[S,w.value]]),d(l("select",{id:"material","onUpdate:modelValue":a[6]||(a[6]=e=>C.value=e),required:"",class:"inputLogin third-input"},[l("option",he,o(t.$t("Material")),1),(r(!0),i(T,null,U(E.value,e=>(r(),i("option",{key:e.id,value:e.id},o(t.$t(e.name)),9,fe))),128))],512),[[S,C.value]])]),l("div",ye,[d(l("select",{id:"category","onUpdate:modelValue":a[7]||(a[7]=e=>b.value=e),required:"",class:"inputLogin"},[l("option",_e,o(t.$t("Categories")),1),(r(!0),i(T,null,U(q.value,e=>(r(),i("option",{key:e.id,value:e.id},o(t.$t(e.name)),9,we))),128))],512),[[S,b.value]])]),l("button",Ce,o(t.$t("Add Item")),1)],32)])]))}},Te=W(be,[["__scopeId","data-v-83e51b38"]]);export{Te as default};
