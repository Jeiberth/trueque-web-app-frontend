import{_ as J,b as P,r as a,D as z,d as G,c as u,h as H,a as s,t as i,w as k,e as d,v as I,m as L,F as $,k as T,j as K,i as Q,o as r,u as X,S as Y}from"./index-VZJWoiHj.js";import{f as Z}from"./feather-DGZv_OKY.js";import{s as O}from"./successErrorCard-CsDnWBLS.js";const x={class:"edit-thing-page"},ee={class:"container"},te={"data-feather":"image",class:"iconStyle"},oe={class:"title"},se={class:"input-group"},ae=["placeholder"],le={class:"input-group"},ie=["placeholder"],ne={class:"input-group half-input-group"},ue=["placeholder"],re={value:"",disabled:""},de=["value"],ce={class:"input-group third-input-group"},pe=["placeholder"],ve={value:"",disabled:""},ge=["value"],me={value:"",disabled:""},he=["value"],fe={class:"input-group"},ye={value:"",disabled:""},_e=["value"],be={class:"buttons-container"},we={__name:"editThing",setup(Se){const{t:v}=P(),F=K(),E=X(),l=Q(),U=new Y,c=a(""),p=a(""),n=a(!1),g=a(""),m=a(""),h=a(""),f=a(""),y=a(""),_=a(""),b=a(""),w=a(""),V=a([]),D=a([]),q=a([]),M=a([]),A=a(null),S=a([]),C=a(null);z(()=>{l.commit("setLoading",!0)}),G(()=>{Z.replace(),V.value=l.getters.getConditions,M.value=l.getters.getCategories,q.value=l.getters.getMaterials,D.value=l.getters.getColors;const t=JSON.parse(F.query.thing);g.value=t.name,m.value=t.description,h.value=t.price,f.value=t.condition_id,y.value=t.weight,_.value=t.color_id,b.value=t.material_id,w.value=t.category_id,C.value=t.id,l.commit("setLoading",!1)});const B=()=>{A.value.click()},N=t=>{const o=Array.from(t.target.files);if(o.length>0){if(!o.every(j=>j.type.startsWith("image/"))){c.value="error",p.value=v("Only image files are allowed."),n.value=!0,setTimeout(()=>{n.value=!1},2800),S.value=null;return}S.value=o}else S.value=null},R=async()=>{try{if(l.commit("setLoading",!0),(await U.deleteThing(C.value)).success)l.commit("deleteThingFromStore",C.value),E.push({name:"profile"}),c.value="success",p.value=v("Thing deleted successfully"),n.value=!0;else throw new Error("Delete failed")}catch{c.value="error",p.value=v("Error deleting thing"),n.value=!0,setTimeout(()=>{n.value=!1},2800)}finally{l.commit("setLoading",!1)}},W=async()=>{l.commit("setLoading",!0);const t={thingID:C.value,name:g.value,description:m.value,price:h.value,condition_id:f.value,weight:y.value,color_id:_.value,material_id:b.value,category_id:w.value,imagesUrl:S.value};try{const o=await U.updateThing(t);if(o.success&&o.thing)l.commit("updateThingInStore",o.thing),E.push({name:"profile"}),c.value="success",p.value=v("Thing Successfully Edited"),n.value=!0;else throw new Error("Update failed")}catch{c.value="error",p.value=v("Error editing thing"),n.value=!0,setTimeout(()=>{n.value=!1},2800)}finally{l.commit("setLoading",!1)}};return(t,o)=>(r(),u("div",x,[H(O,{type:c.value,text:p.value,launch:n.value},null,8,["type","text","launch"]),s("div",ee,[s("div",{class:"cont_logo selected",id:"ImageInput",onClick:B},[s("i",te,[s("input",{type:"file",ref_key:"fileInput",ref:A,style:{display:"none"},onChange:N,accept:"image/*",multiple:""},null,544)])]),s("h1",oe,i(t.$t("Edit Item")),1),s("form",{onSubmit:o[8]||(o[8]=k((...e)=>t.handleSubmit&&t.handleSubmit(...e),["prevent"])),class:"form"},[s("div",se,[d(s("input",{type:"text",id:"name","onUpdate:modelValue":o[0]||(o[0]=e=>g.value=e),required:"",class:"inputLogin",placeholder:t.$t("Thing Name")},null,8,ae),[[I,g.value]])]),s("div",le,[d(s("textarea",{id:"description","onUpdate:modelValue":o[1]||(o[1]=e=>m.value=e),required:"",class:"inputLogin",placeholder:t.$t("Description"),rows:"3"},null,8,ie),[[I,m.value]])]),s("div",ne,[d(s("input",{type:"number",id:"price","onUpdate:modelValue":o[2]||(o[2]=e=>h.value=e),required:"",class:"inputLogin half-input",placeholder:t.$t("Price")},null,8,ue),[[I,h.value]]),d(s("select",{id:"condition","onUpdate:modelValue":o[3]||(o[3]=e=>f.value=e),required:"",class:"inputLogin half-input"},[s("option",re,i(t.$t("Condition")),1),(r(!0),u($,null,T(V.value,e=>(r(),u("option",{key:e.id,value:e.id},i(t.$t(e.name)),9,de))),128))],512),[[L,f.value]])]),s("div",ce,[d(s("input",{type:"number",id:"weight","onUpdate:modelValue":o[4]||(o[4]=e=>y.value=e),class:"inputLogin third-input",placeholder:t.$t("Weight")},null,8,pe),[[I,y.value]]),d(s("select",{id:"color","onUpdate:modelValue":o[5]||(o[5]=e=>_.value=e),required:"",class:"inputLogin third-input"},[s("option",ve,i(t.$t("Color")),1),(r(!0),u($,null,T(D.value,e=>(r(),u("option",{key:e.id,value:e.id},i(t.$t(e.name)),9,ge))),128))],512),[[L,_.value]]),d(s("select",{id:"material","onUpdate:modelValue":o[6]||(o[6]=e=>b.value=e),required:"",class:"inputLogin third-input"},[s("option",me,i(t.$t("Material")),1),(r(!0),u($,null,T(q.value,e=>(r(),u("option",{key:e.id,value:e.id},i(t.$t(e.name)),9,he))),128))],512),[[L,b.value]])]),s("div",fe,[d(s("select",{id:"category","onUpdate:modelValue":o[7]||(o[7]=e=>w.value=e),class:"inputLogin"},[s("option",ye,i(t.$t("Categories")),1),(r(!0),u($,null,T(M.value,e=>(r(),u("option",{key:e.id,value:e.id},i(t.$t(e.name)),9,_e))),128))],512),[[L,w.value]])]),s("div",be,[s("button",{type:"button",class:"delete-button",onClick:k(R,["prevent"])},i(t.$t("Delete Item")),1),s("button",{type:"submit",class:"submit-button",onClick:k(W,["prevent"])},i(t.$t("Save Changes")),1)])],32)])]))}},$e=J(we,[["__scopeId","data-v-9649be3b"]]);export{$e as default};
