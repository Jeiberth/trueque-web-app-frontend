import{_ as O,d as g,D as I,o as a,c as d,a as e,t as m,b as C,r as p,K as b,i as h,G as N,x as k,h as x,j as R,F as q,p as B,k as F,m as D,u as E,l as L}from"./index-BF9W6jLJ.js";const w={style:{cursor:"pointer"}},U={class:"rap"},j=["data-feather"],A={class:"card-body"},T={class:"user-info"},V={class:"offer"},J={__name:"cardForClick",props:{text:{type:String,required:!0},icon:{type:String,required:!0}},emits:["clicked"],setup(c,{emit:t}){g(async()=>{I.replace()});const o=t,n=()=>{o("clicked")};return(_,r)=>(a(),d("div",w,[e("div",{class:"card",onClick:n},[e("div",U,[e("i",{"data-feather":c.icon,class:"iconStyle",style:{color:"black"}},null,8,j)]),e("div",A,[e("div",T,[e("p",V,m(c.text),1)])])])]))}},M=O(J,[["__scopeId","data-v-09b40e07"]]),P={style:{cursor:"pointer"}},G={class:"rap"},K={key:0,"data-feather":"check-circle",class:"iconStyle",style:{color:"green"}},z={key:1,"data-feather":"x-circle",class:"iconStyle",style:{color:"red"}},H={key:2,"data-feather":"clock",class:"iconStyle",style:{color:"darkcyan"}},Q={class:"card-body"},W={class:"user-info"},X={class:"offer"},Y={class:"stats"},Z={class:"stats"},ee={__name:"offerCard",props:{offerId:{type:Number},offerStatus:{type:Number,default:5},offerSend:{type:Boolean,default:!1},created_at:{type:String,default:"30/10/2024"}},emits:["openOffer"],setup(c,{emit:t}){const{t:o}=C(),n=p(!1),_=p(!1),r=p(!1),f=p(""),s=c;g(async()=>{s.offerStatus===1||s.offerStatus===2?(f.value=o("Accepted"),n.value=!0):s.offerStatus==3||s.offerStatus==4?(f.value=o("Rejected"),_.value=!0):s.offerStatus==5&&(f.value=o("Pending"),r.value=!0),await b(),I.replace()});const y=t,v=()=>{y("openOffer",s.offerId)},S=i=>new Date(i).toLocaleString();return(i,l)=>(a(),d("div",P,[e("div",{class:"card",onClick:v},[e("div",G,[n.value?(a(),d("i",K)):h("",!0),_.value?(a(),d("i",z)):h("",!0),r.value?(a(),d("i",H)):h("",!0)]),e("div",Q,[e("div",W,[e("p",X,m(c.offerSend?i.$t("Offer Sent"):i.$t("Offer Received")),1),e("p",Y,m(f.value),1),e("p",Z,m(S(c.created_at)),1)])])])]))}},te=O(ee,[["__scopeId","data-v-40145c28"]]),se={class:"cont-offer"},ae={__name:"offers",setup(c){C();const t=F(),o=D(),n=E(),_=p(!1),r=o.query.userId,f=o.query.chatId;N(()=>{t.commit("setLoading",!0)});const s=k(()=>t.getters.getUserOffers(r)),y=k(()=>s.value.offers),v=k(()=>s.value.makeOffer);g(async()=>{try{t.commit("RESET_OFFERS_COUNT",f),t.commit("setLoading",!0),I.replace(),await t.dispatch("fetchUserOffers",r)}catch(l){console.error("Error loading offers:",l)}finally{t.commit("setLoading",!1)}});const S=(l,$)=>{n.push({name:"watchOffer",query:{offerId:l,offer:JSON.stringify($),userId:r}})},i=()=>{n.push({name:"makeOffer",query:{userId:r,chatId:f,data:JSON.stringify(v.value)}})};return(l,$)=>(a(),d("div",null,[_.value?(a(),x(L,{key:0})):h("",!0),e("div",se,[R(M,{text:"Make an Offer",icon:"plus-circle",onClicked:i}),(a(!0),d(q,null,B(y.value,(u,oe)=>(a(),x(te,{onOpenOffer:re=>S(u.id,u.offer),offerStatus:u.status_id,offerSend:u.offerSend,created_at:u.created_at,offerId:u.id},null,8,["onOpenOffer","offerStatus","offerSend","created_at","offerId"]))),256))])]))}},ne=O(ae,[["__scopeId","data-v-cb0201f9"]]);export{ne as default};
