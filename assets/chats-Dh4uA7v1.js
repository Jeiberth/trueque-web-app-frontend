import{f as _}from"./fallback_user-DHolJLBa.js";import{_ as h,b as y,o as c,c as r,a,t as o,l as m,n as u,D as v,q as N,d as b,F as C,k as p,i as I,A as k,u as $}from"./index-eWhrK3vB.js";import{f as M}from"./feather-DPEOA0yr.js";const S={class:"chat-card-image"},w=["src"],L={class:"chat-card-body"},B={class:"title-card username"},E={class:"notifications"},U={key:0,class:u(["badge","offer-badge"])},q={key:1,class:u(["badge","message-badge"])},A={key:0,class:"notification-bubble"},D={__name:"matchCard",props:{chatId:{type:Number},userName:{type:String,default:"Username"},image:{type:String,default:"src/assets/images/p2.jpg"},message:{type:Number,default:0},offer:{type:Number,default:0}},emits:["selectChat"],setup(t,{emit:s}){y();function l(e){e.target.src=_}const i=s,d=()=>{i("selectChat")};return(e,f)=>(c(),r("div",{class:"chat-card",onClick:d},[a("div",S,[a("img",{src:t.image,alt:"User Avatar",class:"avatar",onError:l},null,40,w)]),a("div",L,[a("h5",B,o(t.userName),1),a("div",E,[t.offer>0?(c(),r("span",U,o(t.offer)+" "+o(t.offer===1?e.$t("New Offer"):e.$t("New Offers")),1)):m("",!0),t.message>0?(c(),r("span",q,o(t.message)+" "+o(t.message===1?e.$t("New Message"):e.$t("New Messages")),1)):m("",!0)])]),t.offer>0||t.message>0?(c(),r("div",A,[a("span",null,o(t.offer+t.message),1)])):m("",!0)]))}},F=h(D,[["__scopeId","data-v-04c7dd82"]]),O={class:"tittle"},V={key:0,class:"noChats"},j={class:"scrolling"},z={__name:"chats",setup(t){const s=I(),l=$();v(()=>{s.commit("setLoading",!0)});const i=N(()=>s.getters.getMatches||[]);b(async()=>{if(M.replace(),s.getters.getMatches)s.commit("setLoading",!1);else try{s.commit("setLoading",!0),await s.dispatch("fetchMatches")}catch(e){console.error("Error loading matches:",e)}finally{s.commit("setLoading",!1)}s.commit("setLoading",!1)});const d=e=>{l.push({name:"messages",query:{chatId:e.chat_id,userName:e.name,image:e.profile_picture,userId:e.userId}})};return(e,f)=>(c(),r("div",null,[a("h1",O,o(e.$t("Chats")),1),f[0]||(f[0]=a("div",{class:"line"},null,-1)),i.value.length==0?(c(),r("h2",V,o(e.$t("No matches, no messagesâ€”yet! Swipe more to find great exchanges.")),1)):m("",!0),a("div",j,[(c(!0),r(C,null,p(i.value,(n,g)=>(c(),k(F,{key:g,chatId:n.chatId,userName:n.name,image:n.profile_picture,offer:n.offers_count,message:n.unread_messages_count,onSelectChat:R=>d(n)},null,8,["chatId","userName","image","offer","message","onSelectChat"]))),128))])]))}},J=h(z,[["__scopeId","data-v-de651f7b"]]);export{J as default};
