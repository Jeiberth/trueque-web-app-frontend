import{f as P}from"./feather-DLCu0CSh.js";import{p as T,r as U}from"./ratingCard-B_bhMb9s.js";import{t as $,a as b}from"./tabChatsRates-D_wkFE6Y.js";import{_ as E,b as R,r as m,q as g,d as B,c as u,h as p,y as v,i as D,o as s,a as f,F as h,k as _,A as w,t as y,l as N,S as L,u as F,j as O}from"./index-De9TGtBS.js";import"./fallback_user-DHolJLBa.js";import"./fallback_thing_msg-BHafCOoy.js";const V={class:"profile-container"},q={class:"scroll-content"},j={key:0,class:"thereNo"},J={class:"scroll-content"},M={key:0,class:"thereNo"},x={__name:"profile",setup(z){R();const a=D(),C=new L,d=F();O(),a.getters.getUserId;const o=m([]),n=m([]),t=g(()=>a.getters.getUserDetails),l=g(()=>t.value?{userProfileImg:t.value.user.profile_picture,userName:t.value.user.name,owner:t.value.owner,rating:t.value.average_rating,things:t.value.things_count,swaps:t.value.swaps}:{userProfileImg:"",userName:"",owner:!1,rating:0,things:0,swaps:0});B(async()=>{if(a.commit("setLoading",!0),t.value)o.value=t.value.things,n.value=t.value.ratings;else try{await a.dispatch("fetchUserDetails"),o.value=t.value.things,n.value=t.value.ratings}catch(r){console.error("Failed to load user details:",r)}P.replace(),a.commit("setLoading",!1)});const I=r=>{d.push({name:"editThing",query:{thing:JSON.stringify(r)}})},A=()=>{d.push({name:"newthing"})},S=()=>{d.push({name:"editProfile"})},k=async()=>{a.commit("setLoading",!0),await C.logout(),localStorage.removeItem("access_token"),localStorage.removeItem("user_id"),a.dispatch("logout"),d.push({name:"login"})};return(r,i)=>(s(),u("div",V,[p(T,{userProfileImg:l.value.userProfileImg,userName:l.value.userName,owner:!0,rating:l.value.rating,things:l.value.things,swaps:l.value.swaps,onAddThing:i[0]||(i[0]=e=>A()),onEditUser:i[1]||(i[1]=e=>k()),onEditProfile:i[2]||(i[2]=e=>S())},null,8,["userProfileImg","userName","rating","things","swaps"]),p($,{tab1:r.$t("Things"),tab2:r.$t("Reviews")},{firstTap:v(()=>[f("div",q,[(s(!0),u(h,null,_(o.value,e=>(s(),w(b,{key:e.id,thing_id:e.id,name:e.name,description:e.description,price:e.price,condition:e.condition_name,imageUrl:e.imagesUrl,owner:!0,noOwner:!1,forOffer:!1,onEditThing:c=>I(e)},null,8,["thing_id","name","description","price","condition","imageUrl","onEditThing"]))),128))]),!o.value||Array.isArray(o.value)&&o.value.length===0?(s(),u("h2",j,y(r.$t("Add your first item and start trading today!")),1)):N("",!0)]),secondTap:v(()=>[f("div",J,[(s(!0),u(h,null,_(n.value,(e,c)=>(s(),w(U,{key:c,userName:e.userName,ratingScore:e.ratingScore,ratingComment:e.ratingComment,ratingCreatedAt:e.ratingCreatedAt},null,8,["userName","ratingScore","ratingComment","ratingCreatedAt"]))),128)),!n.value||Array.isArray(n.value)&&n.value.length===0?(s(),u("h2",M,y(r.$t("Complete a trade to get your first review!")),1)):N("",!0)])]),_:1},8,["tab1","tab2"])]))}},Y=E(x,[["__scopeId","data-v-bd929295"]]);export{Y as default};
