import{t as P,a as V}from"./tabChatsRates-DmvIrzVe.js";import{c as x}from"./cashCard-DrjWFdtv.js";import{s as G}from"./successErrorCard-D8HcLNe4.js";import{_ as K,b as Y,r as a,G as z,d as H,K as D,D as $,c,h as w,i,j as y,a as e,t as C,A as B,k as Q,m as W,o,F as N,p as q,u as X,S as Z,l as ee}from"./index-CZ9WfSIq.js";import"./fallback_thing_msg-BHafCOoy.js";const se={key:1,class:"card"},ae={class:"rap"},te={key:0,"data-feather":"check-circle",class:"iconStyle",style:{color:"green"}},oe={key:1,"data-feather":"x-circle",class:"iconStyle",style:{color:"red"}},le={key:2,"data-feather":"clock",class:"iconStyle",style:{color:"darkcyan"}},re={class:"card-body"},ce={class:"user-info"},ne={class:"offer"},ie={key:2,class:"containerDoubleCard"},ue={class:"card-body"},de={class:"user-info"},fe={class:"offer"},ve={class:"card-body"},me={class:"user-info"},pe={class:"offer"},he={__name:"lookAtOffer",setup(_e){const{t:u}=Y(),r=Q(),F=a(!1),S=W(),j=X(),O=new Z,h=S.query.offerId;a(0),a(0);const g=a(""),k=a(""),d=a(),f=a(),v=a(),m=a(),p=a(),l=a(),b=a(),I=a(),U=a(),A=a(),L=S.query.userId,n=a();z(()=>{r.commit("setLoading",!0)}),H(async()=>{const t=JSON.parse(S.query.offer);l.value=t.offerStatus,b.value=t.myThings,I.value=t.hisThings,U.value=t.myCash,A.value=t.hisCash,T(),await D(),$.replace(),r.commit("setLoading",!1)});const R=t=>{j.push({name:"seeThing",query:{thing:JSON.stringify(t)}})},T=async()=>{l.value==1||l.value==2?(p.value=u("Accepted"),f.value=!0,v.value=!1,m.value=!1,n.value=!1):l.value==3||l.value==4?(p.value=u("Rejected"),f.value=!1,v.value=!0,m.value=!1,n.value=!1):l.value==5?(p.value=u("Pending"),f.value=!1,v.value=!1,m.value=!0,n.value=!1):l.value==6&&(p.value="",f.value=!1,v.value=!1,m.value=!1,n.value=!0),await D(()=>{$.replace()})},E=async()=>{r.commit("setLoading",!0),await O.changeOfferStatus({offer_id:h,status_id:3}).then(t=>{g.value="success",k.value=u("The offer was denied"),d.value=!0,l.value=3,T(),r.commit("updateUserOfferStatus",{userId:L,offerId:h,newStatusId:3}),setTimeout(()=>{d.value=!1},2800)}),r.commit("setLoading",!1)},J=async()=>{r.commit("setLoading",!0),await O.changeOfferStatus({offer_id:h,status_id:1}).then(t=>{g.value="success",k.value=u("The offer was accepted"),d.value=!0,l.value=1,T(),r.commit("updateUserOfferStatus",{userId:L,offerId:h,newStatusId:1}),setTimeout(()=>{d.value=!1},2800)}),r.commit("setLoading",!1)};return(t,_)=>(o(),c("div",null,[F.value?(o(),w(ee,{key:0})):i("",!0),y(G,{type:g.value,text:k.value,launch:d.value},null,8,["type","text","launch"]),n.value?i("",!0):(o(),c("div",se,[e("div",ae,[f.value?(o(),c("i",te)):i("",!0),v.value?(o(),c("i",oe)):i("",!0),m.value?(o(),c("i",le)):i("",!0)]),e("div",re,[e("div",ce,[e("p",ne,C(p.value),1)])])])),n.value?(o(),c("div",ie,[e("div",{class:"doubleCard",onClick:J},[_[0]||(_[0]=e("div",{class:"rap"},[e("i",{"data-feather":"check-circle",class:"iconStyle",style:{color:"green"}})],-1)),e("div",ue,[e("div",de,[e("p",fe,C(t.$t("Accept")),1)])])]),e("div",{class:"doubleCard",onClick:E},[_[1]||(_[1]=e("div",{class:"rap"},[e("i",{"data-feather":"x-circle",class:"iconStyle",style:{color:"red"}})],-1)),e("div",ve,[e("div",me,[e("p",pe,C(t.$t("Deny")),1)])])])])):i("",!0),y(P,{tab1:t.$t("My Items"),tab2:t.$t("Their Items")},{firstTap:B(()=>[e("div",null,[y(x,{type:"Cash amount",isDisabled:!0,cashValue:parseInt(U.value)},null,8,["cashValue"]),(o(!0),c(N,null,q(b.value,s=>(o(),w(V,{key:s.id,thing_id:s.id,name:s.name,description:s.description,price:s.price,condition:s.condition_name,imageUrl:s.imagesUrl,owner:!1,noOwner:!0,forOffer:!1,isForOffer:!1,onSeeThing:M=>R(s)},null,8,["thing_id","name","description","price","condition","imageUrl","onSeeThing"]))),128))])]),secondTap:B(()=>[e("div",null,[y(x,{type:"Cash amount",isDisabled:!0,cashValue:parseInt(A.value)},null,8,["cashValue"]),(o(!0),c(N,null,q(I.value,s=>(o(),w(V,{key:s.id,thing_id:s.id,name:s.name,description:s.description,price:s.price,condition:s.condition_name,imageUrl:s.imagesUrl,owner:!1,noOwner:!0,forOffer:!1,isForOffer:!1,onSeeThing:M=>R(s)},null,8,["thing_id","name","description","price","condition","imageUrl","onSeeThing"]))),128))])]),_:1},8,["tab1","tab2"])]))}},we=K(he,[["__scopeId","data-v-0985b20e"]]);export{we as default};
